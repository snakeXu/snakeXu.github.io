<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>å–µå°å–µçš„çª</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="å–µå°å–µçš„çª">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="å–µå°å–µçš„çª">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å–µå°å–µçš„çª">
  
    <link rel="alternate" href="/atom.xml" title="å–µå°å–µçš„çª" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">å–µå°å–µçš„çª</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-3-ä¸­é—´ä»¶æœºåˆ¶å‰–æ" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/12/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-3-ä¸­é—´ä»¶æœºåˆ¶å‰–æ/" class="article-date">
  <time datetime="2020-05-12T14:27:04.000Z" itemprop="datePublished">2020-05-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/12/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-3-ä¸­é—´ä»¶æœºåˆ¶å‰–æ/">ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2.2.3-ä¸­é—´ä»¶æœºåˆ¶å‰–æ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.is-generator-function<br>2.koa-convert<br>3.koa-compose<br>emmâ€¦â€¦è¿™èŠ‚è¯¾è€å¸ˆæ˜¯æŒ‰ç€æºä»£ç è®²çš„ï¼Œè®²äº†æºä»£ç é‡Œè¿™ä¸‰ä¸ªå‡½æ•°ï¼Œsoâ€¦â€¦æˆ‘æ²¡è®°ç¬”è®°ï¼Œä½†æ˜¯è®²å®Œæºç æœ‰å†™ä»£ç è®²äº†å‰¥æ´‹è‘±æ¨¡å‹çš„æ€æƒ³ï¼Œè¿˜æ˜¯å¾ˆå¦™çš„ï¼ŒæŠŠæ•´ä¸ªè€å¸ˆæ¨¡æ‹Ÿçš„æºä»£ç å†™åœ¨è¿™é‡Œï¼Œè‡ªå·±æ…¢æ…¢ä½“ä¼šå§<br>lib/application.js</p>
<pre>
const http = require('http');
const context = require('./context');
const request = require('./request');
const response = require('./response');

class Application {
    constructor() {
        this.callbackFunc;
        this.middlewares = [];
        this.context = Object.create(context);
        this.request = Object.create(request);
        this.response = Object.create(response);
    }

    listen(...args) {
        let server = http.createServer(this.callback());
        server.listen(...args);
    }

    // æ”¶é›†ä¸­é—´ä»¶
    use(fn) {
        this.middlewares.push(fn);
    }
    //å‰¥æ´‹è‘±æ¨¡å‹æ€æƒ³å°±æ˜¯è¿™é‡Œäº†ï¼Œå…ˆæŠŠæ‰€æœ‰å‡½æ•°pushå…¥æ ˆï¼Œ
    //å†å€’åºè¯»å‡ºï¼ŒæŠŠæ’åœ¨åé¢çš„ä»£ç ä½œä¸ºnextç¼“å­˜ï¼Œæ‰§è¡Œä»£ç çš„æ—¶å€™ï¼Œé‡åˆ°nextå°±æ‰§è¡Œä¸‹ä¸€ä¸ªå‡½æ•°æŒ‡ä»¤
    //æœ€åæ²¡æœ‰next()æ‰§è¡Œçš„æ—¶å€™ï¼Œæ‰§è¡Œprimose.resolve()
    compose() {
        return async ctx => {
            let len = this.middlewares.length;
            let next = async () => Promise.resolve();
            for (let i = len - 1; i >= 0; i--) {
                let curentMiddleware = this.middlewares[i];
                next = createNext(curentMiddleware, next)
            }
            await next();
            function createNext(middlewares, oldNext) {
                return async () => await middlewares(ctx, oldNext);
            }
        }
    }
    callback() {
        return (req, res) => {
            let ctx = this.createContext(req, res);
            // this.callbackFunc(ctx);
            let respond = () => this.responseBody(ctx);
            // å…ˆå¤„ç†ä¸­é—´ä»¶ï¼Œç„¶åå»å“åº”
            let fn = this.compose();

            return fn(ctx).then(respond);
        };
    }
    // æ„é€  ctxå¯¹è±¡
    /**
     * ç”¨äºæ„é€ ctx
     * @param {Object} req   NodeåŸç”Ÿreqå®ä¾‹
     * @param {Object} res  Node åŸç”Ÿreså®ä¾‹
     */
    createContext(req, res) {
        // é’ˆå¯¹æ¯ä¸€ä¸ªè¯·æ±‚
        let ctx = Object.create(this.context);
        ctx.request = Object.create(this.request);
        ctx.response = Object.create(this.response);
        ctx.req = ctx.request.req = req;
        ctx.res = ctx.response.res = res;
        return ctx;
    }
    responseBody(ctx) {
        let content = ctx.body;
        if (typeof content === 'string') {
            ctx.res.end(content);
        } else if (typeof content === 'object') {
            ctx.res.end(JSON.stringify(content));
        }
    }
}
module.exports = Application;
</pre>
lib/context.js
<pre>
let proto = {};
function delegateSet(property, name) {
    proto.__defineSetter__(name, function (val) {
        this[property][name] = val;
    });
}
function delegateGet(property, name) {
    proto.__defineGetter__(name, function () {
        return this[property][name];
    })
}
let requestSet = [];
let requestGet = ['query'];
let responseSet = ['body', 'status'];
let responseGet = responseSet;
requestGet.forEach(ele => delegateGet('request', ele));
requestSet.forEach(ele => delegateSet('request', ele));
responseSet.forEach(ele => delegateSet('response', ele));
responseGet.forEach(ele => delegateGet('response', ele));
module.exports = proto;
</pre>
lib/request.js
<pre>
const url = require('url');
module.exports = {
    get query() {
        return url.parse(this.req.url).query;
    }
};
</pre>
lib/response.js
<pre>
module.exports = {
    get body() {
        return this._body;
    },
    set body(data) {
        this._body = data;
    },
    get status() {
        return this.res.statusCode;
    },
    set status(statusCode) {
        if (typeof statusCode !== 'number'){
            throw new Error('Something is wrong!');
        } 
        this.res.statusCode = statusCode;
    }
};
</pre>
è¿™é‡Œresponse.jså’Œrequest.jséƒ½æ˜¯æ¨¡æ‹Ÿäº†ç®€å•éœ€è¦å†™çš„ï¼Œä¹Ÿå°±è¯´å¹¶ä¸æ˜¯å†™äº†æ‰€æœ‰æƒ…å†µçš„response/request
demo.js
<pre>
const Koa = require('./lib/application');
const app = new Koa();
app.use(async (ctx, next) => {
    console.log(1);
    await next();
    console.log(6);
});
app.use(async (ctx, next) => {
    console.log(2);
    await next();
    console.log(5);
});
app.use(async ctx => {
    console.log(3);
    ctx.status = 404;
    ctx.body = 'hello Onion!';
    console.log(4);
});
app.listen(3000, () => {
    console.log('hello Simple Koa');
});
</pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/12/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-3-ä¸­é—´ä»¶æœºåˆ¶å‰–æ/" data-id="ckbm7472x002ib4xqfk3035br" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Web-å‰ç«¯è·¯ç”±åŸç†è§£æå’Œå®ç°" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/09/Web-å‰ç«¯è·¯ç”±åŸç†è§£æå’Œå®ç°/" class="article-date">
  <time datetime="2020-05-09T03:00:07.000Z" itemprop="datePublished">2020-05-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/09/Web-å‰ç«¯è·¯ç”±åŸç†è§£æå’Œå®ç°/">Web å‰ç«¯è·¯ç”±åŸç†è§£æå’Œå®ç°</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æ–‡ç« æ¥æº<a href="https://zhuanlan.zhihu.com/p/88895539" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/88895539</a><br>åœ¨å•é¡µåº”ç”¨å¦‚æ­¤æµè¡Œçš„ä»Šå¤©ï¼Œæ›¾ç»ä»¤äººæƒŠå¹çš„å‰ç«¯è·¯ç”±å·²ç»æˆä¸ºå„å¤§æ¡†æ¶çš„åŸºç¡€æ ‡é…ï¼Œæ¯ä¸ªæ¡†æ¶éƒ½æä¾›äº†å¼ºå¤§çš„è·¯ç”±åŠŸèƒ½ï¼Œå¯¼è‡´è·¯ç”±å®ç°å˜çš„å¤æ‚ã€‚æƒ³è¦ææ‡‚è·¯ç”±å†…éƒ¨å®ç°è¿˜æ˜¯æœ‰äº›å›°éš¾çš„ï¼Œä½†æ˜¯å¦‚æœåªæƒ³äº†è§£è·¯ç”±å®ç°åŸºæœ¬åŸç†è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚æœ¬æ–‡é’ˆå¯¹å‰ç«¯è·¯ç”±ä¸»æµçš„å®ç°æ–¹å¼ hash å’Œ historyï¼Œæä¾›äº†åŸç”ŸJS/React/Vue å…±è®¡å…­ä¸ªç‰ˆæœ¬ä¾›å‚è€ƒï¼Œæ¯ä¸ªç‰ˆæœ¬çš„å®ç°ä»£ç çº¦ 25~40 è¡Œå·¦å³ï¼ˆå«ç©ºè¡Œï¼‰ã€‚<br>ä½œè€…ï¼šwhincwu</p>
<p></p><h4>ä»€ä¹ˆæ˜¯å‰ç«¯è·¯ç”±ï¼Ÿ</h4><br>è·¯ç”±çš„æ¦‚å¿µæ¥æºäºæœåŠ¡ç«¯ï¼Œåœ¨æœåŠ¡ç«¯ä¸­è·¯ç”±æè¿°çš„æ˜¯ URL ä¸å¤„ç†å‡½æ•°ä¹‹é—´çš„æ˜ å°„å…³ç³»ã€‚<br>åœ¨ Web å‰ç«¯å•é¡µåº”ç”¨ SPA(Single Page Application)ä¸­ï¼Œè·¯ç”±æè¿°çš„æ˜¯ URL ä¸ UI ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œè¿™ç§æ˜ å°„æ˜¯å•å‘çš„ï¼Œå³ URL å˜åŒ–å¼•èµ· UI æ›´æ–°ï¼ˆæ— éœ€åˆ·æ–°é¡µé¢ï¼‰ã€‚<p></p>
<p></p><h4>å¦‚ä½•å®ç°å‰ç«¯è·¯ç”±ï¼Ÿ</h4><br>è¦å®ç°å‰ç«¯è·¯ç”±ï¼Œéœ€è¦è§£å†³ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ï¼š<br>1.å¦‚ä½•æ”¹å˜ URL å´ä¸å¼•èµ·é¡µé¢åˆ·æ–°ï¼Ÿ<br>2.å¦‚ä½•æ£€æµ‹ URL å˜åŒ–äº†ï¼Ÿ<br>ä¸‹é¢åˆ†åˆ«ä½¿ç”¨ hash å’Œ history ä¸¤ç§å®ç°æ–¹å¼å›ç­”ä¸Šé¢çš„ä¸¤ä¸ªæ ¸å¿ƒé—®é¢˜ã€‚<p></p>
<p></p><h6>hash å®ç°</h6><br>1.hash æ˜¯ URL ä¸­ hash (#) åŠåé¢çš„é‚£éƒ¨åˆ†ï¼Œå¸¸ç”¨ä½œé”šç‚¹åœ¨é¡µé¢å†…è¿›è¡Œå¯¼èˆªï¼Œæ”¹å˜ URL ä¸­çš„ hash éƒ¨åˆ†ä¸ä¼šå¼•èµ·é¡µé¢åˆ·æ–°<br>2.é€šè¿‡ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/hashchange_event" target="_blank" rel="noopener">hashchange</a> äº‹ä»¶ç›‘å¬ URL çš„å˜åŒ–ï¼Œæ”¹å˜ URL çš„æ–¹å¼åªæœ‰è¿™å‡ ç§ï¼šé€šè¿‡æµè§ˆå™¨å‰è¿›åé€€æ”¹å˜ URLã€é€šè¿‡æ ‡ç­¾æ”¹å˜URLã€é€šè¿‡window.locationæ”¹å˜URLï¼Œè¿™å‡ ç§æƒ…å†µæ”¹å˜ URL éƒ½ä¼šè§¦å‘ hashchange äº‹ä»¶<p></p>
<p></p><h6>history å®ç°</h6><br>1.history æä¾›äº† pushState å’Œ replaceState ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ”¹å˜ URL çš„ path éƒ¨åˆ†ä¸ä¼šå¼•èµ·é¡µé¢åˆ·æ–°<br>2.history æä¾›ç±»ä¼¼ hashchange äº‹ä»¶çš„ popstate äº‹ä»¶ï¼Œä½† popstate äº‹ä»¶æœ‰äº›ä¸åŒï¼šé€šè¿‡æµè§ˆå™¨å‰è¿›åé€€æ”¹å˜ URL æ—¶ä¼šè§¦å‘ popstate äº‹ä»¶ï¼Œé€šè¿‡pushState/replaceStateæˆ–æ ‡ç­¾æ”¹å˜ URL ä¸ä¼šè§¦å‘ popstate äº‹ä»¶ã€‚å¥½åœ¨æˆ‘ä»¬å¯ä»¥æ‹¦æˆª pushState/replaceStateçš„è°ƒç”¨å’Œæ ‡ç­¾çš„ç‚¹å‡»äº‹ä»¶æ¥æ£€æµ‹ URL å˜åŒ–ï¼Œæ‰€ä»¥ç›‘å¬ URL å˜åŒ–å¯ä»¥å®ç°ï¼Œåªæ˜¯æ²¡æœ‰ hashchange é‚£ä¹ˆæ–¹ä¾¿ã€‚<p></p>
<p></p><h4>åŸç”ŸJSç‰ˆå‰ç«¯è·¯ç”±å®ç°</h4><br>åŸºäºä¸ŠèŠ‚è®¨è®ºçš„ä¸¤ç§å®ç°æ–¹å¼ï¼Œåˆ†åˆ«å®ç° hash ç‰ˆæœ¬å’Œ history ç‰ˆæœ¬çš„è·¯ç”±ï¼Œç¤ºä¾‹ä½¿ç”¨åŸç”Ÿ HTML/JS å®ç°ï¼Œä¸ä¾èµ–ä»»ä½•æ¡†æ¶ã€‚<p></p>
<p></p><h5>åŸºäº hash å®ç°</h5><br>è¿è¡Œæ•ˆæœï¼š<br><img src="https://snakexu.github.io/images/others/router_1.jpg"><br>HTML éƒ¨åˆ†ï¼š<p></p>
<p><pre><br>&lt; body &gt;<br>  &lt; ul &gt;<br>ref=â€â€&gt;    &lt; !â€“ å®šä¹‰è·¯ç”± â€“ &gt;<br>    &lt; li &gt;&lt; a href=â€#/homeâ€&gt;home&lt; /a &gt;&lt; /li &gt;<br>    &lt; li &gt;&lt; a href=â€#/aboutâ€&gt;about&lt; /a &gt;&lt; /li &gt;<br>ref=â€â€&gt;    <!-- æ¸²æŸ“è·¯ç”±å¯¹åº”çš„ UI --><br>    &lt; div id=â€routeViewâ€ &gt;&lt; /div &gt;<br>  &lt; /ul &gt;<br>&lt; /body &gt;<br></pre><br>JavaScript éƒ¨åˆ†ï¼š</p>
<p><pre><br>// é¡µé¢åŠ è½½å®Œä¸ä¼šè§¦å‘ hashchangeï¼Œè¿™é‡Œä¸»åŠ¨è§¦å‘ä¸€æ¬¡ hashchange äº‹ä»¶<br>window.addEventListener(â€˜DOMContentLoadedâ€™, onLoad)<br>// ç›‘å¬è·¯ç”±å˜åŒ–<br>window.addEventListener(â€˜hashchangeâ€™, onHashChange)<br>// è·¯ç”±è§†å›¾<br>var routerView = null<br>function onLoad () {<br>  routerView = document.querySelector(â€˜#routeViewâ€™)<br>  onHashChange()<br>}<br>// è·¯ç”±å˜åŒ–æ—¶ï¼Œæ ¹æ®è·¯ç”±æ¸²æŸ“å¯¹åº” UI<br>function onHashChange () {<br>  switch (location.hash) {<br>    case â€˜#/homeâ€™:<br>      routerView.innerHTML = â€˜Homeâ€™<br>      return<br>    case â€˜#/aboutâ€™:<br>      routerView.innerHTML = â€˜Aboutâ€™<br>      return<br>    default:<br>      return<br>  }<br>}<br></pre></p>
<p></p><h5>åŸºäº history å®ç°</h5><br>è¿è¡Œæ•ˆæœï¼š<br><img src="https://snakexu.github.io/images/others/router_2.jpg"><br>HTML éƒ¨åˆ†ï¼š<p></p>
<p><pre><br>&lt; body &gt;<br>  &lt; ul &gt;<br>    &lt; li &gt;&lt; a href=â€™/homeâ€™ &gt;home&lt; /a &gt;&lt; /li &gt;<br>    &lt; li &gt;&lt; a href=â€™/aboutâ€™ &gt;about&lt; /a &gt;&lt; /li &gt;<br>    &lt; div id=â€routeViewâ€ &gt;&lt; /div &gt;<br>  &lt; /ul &gt;<br>&lt; /body &gt;<br></pre><br>JavaScript éƒ¨åˆ†ï¼š</p>
<p><pre><br>// é¡µé¢åŠ è½½å®Œä¸ä¼šè§¦å‘ hashchangeï¼Œè¿™é‡Œä¸»åŠ¨è§¦å‘ä¸€æ¬¡ hashchange äº‹ä»¶<br>window.addEventListener(â€˜DOMContentLoadedâ€™, onLoad)<br>// ç›‘å¬è·¯ç”±å˜åŒ–<br>window.addEventListener(â€˜popstateâ€™, onPopState)<br>// è·¯ç”±è§†å›¾<br>var routerView = null<br>function onLoad () {<br>  routerView = document.querySelector(â€˜#routeViewâ€™)<br>  onPopState()<br> href=â€â€&gt;  // æ‹¦æˆª &lt; a &gt; æ ‡ç­¾ç‚¹å‡»äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼Œ ç‚¹å‡»æ—¶ä½¿ç”¨ pushState ä¿®æ”¹ URLå¹¶æ›´æ–°æ‰‹åŠ¨ UIï¼Œä»è€Œå®ç°ç‚¹å‡»é“¾æ¥æ›´æ–° URL å’Œ UI çš„æ•ˆæœã€‚<br>  var linkList = document.querySelectorAll(â€˜a[href]â€™)<br>  linkList.forEach(el =&gt; el.addEventListener(â€˜clickâ€™, function (e) {<br>    e.preventDefault()<br>    history.pushState(null, â€˜â€™, el.getAttribute(â€˜hrefâ€™))<br>    onPopState()<br>  }))<br>}<br>// è·¯ç”±å˜åŒ–æ—¶ï¼Œæ ¹æ®è·¯ç”±æ¸²æŸ“å¯¹åº” UI<br>function onPopState () {<br>  switch (location.pathname) {<br>    case â€˜/homeâ€™:<br>      routerView.innerHTML = â€˜Homeâ€™<br>      return<br>    case â€˜/aboutâ€™:<br>      routerView.innerHTML = â€˜Aboutâ€™<br>      return<br>    default:<br>      return<br>  }<br>}<br></pre></p>
<p></p><h5>React ç‰ˆå‰ç«¯è·¯ç”±å®ç°</h5><p></p>
<p></p><h6>åŸºäº hash å®ç°</h6><br>è¿è¡Œæ•ˆæœï¼š<br><img src="https://snakexu.github.io/images/others/router_3.jpg"><br>ä½¿ç”¨æ–¹å¼å’Œ react-router ç±»ä¼¼ï¼š<p></p>
<p><pre><br>&lt; BrowserRouter &gt;<br>    &lt; ul &gt;<br>      &lt; li &gt;<br>        &lt; Link to=â€/homeâ€ &gt;home&lt; /Link &gt;<br>      &lt; /li &gt;<br>      &lt; li &gt;<br>        &lt; Link to=â€/aboutâ€ &gt;about&lt; /Link &gt;<br>      &lt; /li &gt;<br>    &lt; /ul &gt;<br>    &lt; Route path=â€/homeâ€ render={() =&gt; &lt; h2 &gt;Home&lt; /h2 &gt;} /&gt;<br>    &lt; Route path=â€/aboutâ€ render={() =&gt; &lt; h2 &gt;About&lt; /h2 &gt;} /&gt;<br>&lt; /BrowserRouter &gt;<br></pre><br>BrowserRouter å®ç°</p>
<p><pre><br>export default class BrowserRouter extends React.Component {<br>  state = {<br>    currentPath: utils.extractHashPath(window.location.href)<br>  };<br>  onHashChange = e =&gt; {<br>    const currentPath = utils.extractHashPath(e.newURL);<br>    console.log(â€œonHashChange:â€, currentPath);<br>    this.setState({ currentPath });<br>  };<br>  componentDidMount() {<br>    window.addEventListener(â€œhashchangeâ€, this.onHashChange);<br>  }<br>  componentWillUnmount() {<br>    window.removeEventListener(â€œhashchangeâ€, this.onHashChange);<br>  }<br>  render() {<br>    return (<br>      &lt; RouteContext.Provider value={ {currentPath: this.state.currentPath} } &gt;<br>        {this.props.children}<br>      &lt; /RouteContext.Provider &gt;<br>    );<br>  }<br>}<br></pre><br>Route å®ç°</p>
<p><pre><br>export default ({ path, render }) =&gt; (<br>  &lt; RouteContext.Consumer &gt;<br>    {({currentPath}) =&gt; currentPath === path &amp;&amp; render()}<br>  &lt; /RouteContext.Consumer &gt;<br>);<br></pre><br>Link å®ç°</p>
<p><pre><br>export default ({ to, â€¦props }) =&gt; &lt; a {â€¦props} href={â€œ#â€ + to} /&gt;;<br></pre></p>
<p></p><h6>åŸºäº history å®ç°</h6><br>è¿è¡Œæ•ˆæœ:<br><img src="https://snakexu.github.io/images/others/router_4.jpg"><br>ä½¿ç”¨æ–¹å¼å’Œ react-router ç±»ä¼¼ï¼š<p></p>
<p><pre><br>&lt; HistoryRouter &gt;<br>    &lt; ul &gt;<br>      &lt; li &gt;<br>        &lt; Link to=â€/homeâ€ &gt;home&lt; /Link &gt;<br>      &lt; /li &gt;<br>      &lt; li &gt;<br>        &lt; Link to=â€/aboutâ€ &gt;about&lt; /Link &gt;<br>      &lt; /li &gt;<br>    &lt; /ul &gt;<br>    &lt; Route path=â€/homeâ€ render={() =&gt; &lt; h2 &gt;Home&lt; /h2 &gt;} /&gt;<br>    &lt; Route path=â€/aboutâ€ render={() =&gt; &lt; h2 &gt;About&lt; /h2 &gt;} /&gt;<br>  &lt; /HistoryRouter &gt;<br></pre><br>HistoryRouter å®ç°</p>
<p><pre><br>export default class HistoryRouter extends React.Component {<br>  state = {<br>    currentPath: utils.extractUrlPath(window.location.href)<br>  };<br>  onPopState = e =&gt; {<br>    const currentPath = utils.extractUrlPath(window.location.href);<br>    console.log(â€œonPopState:â€, currentPath);<br>    this.setState({ currentPath });<br>  };<br>  componentDidMount() {<br>    window.addEventListener(â€œpopstateâ€, this.onPopState);<br>  }<br>  componentWillUnmount() {<br>    window.removeEventListener(â€œpopstateâ€, this.onPopState);<br>  }<br>  render() {<br>    return (<br>      &lt; RouteContext.Provider value={ {currentPath: this.state.currentPath, onPopState: this.onPopState} }&gt;<br>        {this.props.children}<br>      &lt; /RouteContext.Provider&gt;<br>    );<br>  }<br>}<br></pre><br>Route å®ç°</p>
<p><pre><br>export default ({ path, render }) =&gt; (<br>  &lt; RouteContext.Consumer&gt;<br>    {({currentPath}) =&gt; currentPath === path &amp;&amp; render()}<br>  &lt; /RouteContext.Consumer&gt;<br>);<br></pre><br>Link å®ç°</p>
<p><pre><br>export default ({ to, â€¦props }) =&gt; (<br>  &lt;RouteContext.Consumer&gt;<br>    {({ onPopState }) =&gt; (<br>      &lt; a<br>        href=â€â€<br>        {â€¦props}<br>        onClick={e =&gt; {<br>          e.preventDefault();<br>          window.history.pushState(null, â€œâ€, to);<br>          onPopState();<br>        }}<br>      /&gt;<br>    )}<br>  &lt; /RouteContext.Consumer&gt;<br>);<br></pre></p>
<p></p><h5>Vue ç‰ˆæœ¬å‰ç«¯è·¯ç”±å®ç°</h5><p></p>
<p></p><h6>åŸºäº hash å®ç°</h6><br>è¿è¡Œæ•ˆæœï¼š<br><img src="https://snakexu.github.io/images/others/router_5.jpg"><br>ä½¿ç”¨æ–¹å¼å’Œ vue-router ç±»ä¼¼ï¼ˆvue-router é€šè¿‡æ’ä»¶æœºåˆ¶æ³¨å…¥è·¯ç”±ï¼Œä½†æ˜¯è¿™æ ·éšè—äº†å®ç°ç»†èŠ‚ï¼Œä¸ºäº†ä¿æŒä»£ç ç›´è§‚ï¼Œè¿™é‡Œæ²¡æœ‰ä½¿ç”¨ Vue æ’ä»¶å°è£…ï¼‰ï¼š<p></p>
<p><pre><br>&lt; div&gt;<br>    &lt; ul &gt;<br>        &lt; li &gt;&lt; router-link to=â€/homeâ€ &gt;home&lt; /router-link &gt;&lt; /li &gt;<br>        &lt; li &gt;&lt; router-link to=â€/aboutâ€ &gt;about&lt; /router-link &gt;&lt; /li &gt;<br>    &lt; /ul &gt;<br>    &lt; router-view &gt;&lt; /router-view &gt;<br>&lt; /div &gt;<br>const routes = {<br>  â€˜/homeâ€™: {<br>    template: â€˜&lt; h2 &gt;Home&lt; /h2 &gt;â€™<br>  },<br>  â€˜/aboutâ€™: {<br>    template: â€˜&lt; h2 &gt;About&lt; /h2 &gt;â€™<br>  }<br>}<br>const app = new Vue({<br>  el: â€˜.vue.hashâ€™,<br>  components: {<br>    â€˜router-viewâ€™: RouterView,<br>    â€˜router-linkâ€™: RouterLink<br>  },<br>  beforeCreate () {<br>    this.$routes = routes<br>  }<br>})<br></pre><br>router-view å®ç°:</p>
<p><pre><br>&lt; template &gt;<br>  &lt; component :is=â€routeViewâ€ / &gt;<br>&lt; /template &gt;<br>&lt; script &gt;<br>import utils from â€˜~/utils.jsâ€™<br>export default {<br>  data () {<br>    return {<br>      routeView: null<br>    }<br>  },<br>  created () {<br>    this.boundHashChange = this.onHashChange.bind(this)<br>  },<br>  beforeMount () {<br>    window.addEventListener(â€˜hashchangeâ€™, this.boundHashChange)<br>  },<br>  mounted () {<br>    this.onHashChange()<br>  },<br>  beforeDestroy() {<br>    window.removeEventListener(â€˜hashchangeâ€™, this.boundHashChange)<br>  },<br>  methods: {<br>    onHashChange () {<br>      const path = utils.extractHashPath(window.location.href)<br>      this.routeView = this.$root.$routes[path] || null<br>      console.log(â€˜vue:hashchange:â€™, path)<br>    }<br>  }<br>}<br>&lt; /script &gt;<br></pre><br>router-link å®ç°:</p>
<p><pre><br>&lt; template &gt;<br>  &lt; a @click.prevent=â€onClickâ€ href=â€™â€™ &gt;&lt; slot &gt;&lt; /slot &gt;&lt; /a &gt;<br>&lt; /template &gt;<br>&lt; script &gt;<br>export default {<br>  props: {<br>    to: String<br>  },<br>  methods: {<br>    onClick () {<br>      window.location.hash = â€˜#â€™ + this.to<br>    }<br>  }<br>}<br>&lt; /script &gt;<br></pre></p>
<p></p><h6>åŸºäº history å®ç°</h6><br>è¿è¡Œæ•ˆæœï¼š<br><img src="https://snakexu.github.io/images/others/router_6.jpg"><br>ä½¿ç”¨æ–¹å¼å’Œ vue-router ç±»ä¼¼ï¼š<p></p>
<p><pre><br>&lt; div &gt;<br>    &lt; ul &gt;<br>        &lt; li &gt;&lt; router-link to=â€/homeâ€ &gt;home&lt; /router-link &gt;&lt; /li &gt;<br>        &lt; li &gt;&lt; router-link to=â€/aboutâ€ &gt;about&lt; /router-link &gt;&lt; /li &gt;<br>    &lt; /ul &gt;<br>    &lt; router-view &gt;&lt; /router-view &gt;<br>&lt; /div &gt;<br>const routes = {<br>  â€˜/homeâ€™: {<br>    template: â€˜&lt; h2 &gt;Home&lt; /h2 &gt;â€™<br>  },<br>  â€˜/aboutâ€™: {<br>    template: â€˜&lt; h2 &gt;About&lt; /h2 &gt;â€™<br>  }<br>}<br>const app = new Vue({<br>  el: â€˜.vue.historyâ€™,<br>  components: {<br>    â€˜router-viewâ€™: RouterView,<br>    â€˜router-linkâ€™: RouterLink<br>  },<br>  created () {<br>    this.$routes = routes<br>    this.boundPopState = this.onPopState.bind(this)<br>  },<br>  beforeMount () {<br>    window.addEventListener(â€˜popstateâ€™, this.boundPopState)<br>  },<br>  beforeDestroy () {<br>    window.removeEventListener(â€˜popstateâ€™, this.boundPopState)<br>  },<br>  methods: {<br>    onPopState (â€¦args) {<br>      this.$emit(â€˜popstateâ€™, â€¦args)<br>    }<br>  }<br>})<br></pre><br>router-view å®ç°ï¼š</p>
<p><pre><br>&lt; template &gt;<br>  &lt; component :is=â€routeViewâ€ /&gt;<br>&lt; /template &gt;</pre></p>
<p>&lt; script &gt;<br>import utils from â€˜~/utils.jsâ€™<br>export default {<br>  data () {<br>    return {<br>      routeView: null<br>    }<br>  },<br>  created () {<br>    this.boundPopState = this.onPopState.bind(this)<br>  },<br>  beforeMount () {<br>    this.$root.$on(â€˜popstateâ€™, this.boundPopState)<br>  },<br>  beforeDestroy() {<br>    this.$root.$off(â€˜popstateâ€™, this.boundPopState)<br>  },<br>  methods: {<br>    onPopState (e) {<br>      const path = utils.extractUrlPath(window.location.href)<br>      this.routeView = this.$root.$routes[path] || null<br>      console.log(â€˜[Vue] popstate:â€™, path)<br>    }<br>  }<br>}<br>&lt; /script &gt;<br><br>router-link å®ç°:</p>
<p><pre><br>&lt; template &gt;<br>  &lt; a @click.prevent=â€onClickâ€ href=â€™â€™ &gt;&lt; slot &gt;&lt; /slot &gt;&lt; /a &gt;<br>&lt; /template &gt;<br>&lt; script &gt;<br>export default {<br>  props: {<br>    to: String<br>  },<br>  methods: {<br>    onClick () {<br>      history.pushState(null, â€˜â€™, this.to)<br>      this.$root.$emit(â€˜popstateâ€™)<br>    }<br>  }<br>}<br>&lt; /script &gt;<br></pre></p>
<p></p><h4>å°ç»“</h4><br>å‰ç«¯è·¯ç”±çš„æ ¸å¿ƒå®ç°åŸç†å¾ˆç®€å•ï¼Œä½†æ˜¯ç»“åˆå…·ä½“æ¡†æ¶åï¼Œæ¡†æ¶å¢åŠ äº†å¾ˆå¤šç‰¹æ€§ï¼Œå¦‚åŠ¨æ€è·¯ç”±ã€è·¯ç”±å‚æ•°ã€è·¯ç”±åŠ¨ç”»ç­‰ç­‰ï¼Œè¿™äº›å¯¼è‡´è·¯ç”±å®ç°å˜çš„å¤æ‚ã€‚æœ¬æ–‡å»ç²—å–ç²¾åªé’ˆå¯¹å‰ç«¯è·¯ç”±æœ€æ ¸å¿ƒéƒ¨åˆ†çš„å®ç°è¿›è¡Œåˆ†æï¼Œå¹¶åŸºäº hash å’Œ history ä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«æä¾›åŸç”ŸJS/React/Vue ä¸‰ç§å®ç°ï¼Œå…±è®¡å…­ä¸ªå®ç°ç‰ˆæœ¬ä¾›å‚è€ƒï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚<br>æ‰€æœ‰çš„ç¤ºä¾‹çš„ä»£ç æ”¾åœ¨ Github ä»“åº“ï¼š<a href="https://github.com/whinc/web-router-principle" target="_blank" rel="noopener">https://github.com/whinc/web-router-principle</a><p></p>
<p></p><h4>å‚è€ƒ</h4><br><a href="https://link.zhihu.com/?target=http%3A//www.cnblogs.com/xiaobie123/p/6357724.html" target="_blank">è¯¦è§£å•é¡µé¢è·¯ç”±çš„å‡ ç§å®ç°åŸç†</a><br><a href="https://link.zhihu.com/?target=https%3A//github.com/youngwind/blog/issues/109" target="_blank">å•é¡µé¢åº”ç”¨è·¯ç”±å®ç°åŸç†ï¼šä»¥ React-Router ä¸ºä¾‹</a><p></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/09/Web-å‰ç«¯è·¯ç”±åŸç†è§£æå’Œå®ç°/" data-id="ckbm7475c003ub4xqr28b6hkm" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/å‰ç«¯è·¯ç”±/">å‰ç«¯è·¯ç”±</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-2-è¯·æ±‚å¤„ç†æµç¨‹è§£è¯»" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/08/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-2-è¯·æ±‚å¤„ç†æµç¨‹è§£è¯»/" class="article-date">
  <time datetime="2020-05-08T10:12:51.000Z" itemprop="datePublished">2020-05-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/08/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-2-è¯·æ±‚å¤„ç†æµç¨‹è§£è¯»/">ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2.2.2-è¯·æ±‚å¤„ç†æµç¨‹è§£è¯»</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.ä¸Šä¸‹æ–‡å¯¹è±¡è§£è¯»</p>
<p><pre><br>// application.js<br>// ç”¨äºå¤„ç†è¯·æ±‚<br>handleRequest(ctx, fnMiddleware) {<br>    // é€šè¿‡ä¼ é€’è¿‡æ¥çš„ctxï¼Œè·å–åˆ°åŸç”Ÿçš„å¯å†™æµ<br>    const res = ctx.res;<br>    // è®¾ç½®é»˜è®¤çš„statusCode 404<br>    res.statusCode = 404;<br>    const onerror = err =&gt; ctx.onerror(err);<br>    const handleResponse = () =&gt; respond(ctx);<br>    onFinished(res, onerror);<br>    return fnMiddleware(ctx).then(handleResponse).catch(onerror);<br>}<br> // å“åº”è¯·æ±‚<br>// res å“åº”è¾…åŠ©å‡½æ•°<br>function respond(ctx) {<br>  // é€šè¿‡è®¾ç½®ctx.respond å»ç»•è¿‡koa<br>  if (false === ctx.respond) return;<br>  // åˆ¤æ–­ctxåŸå‹é“¾ä¸Šçš„ writableå±æ€§<br>  if (!ctx.writable) return;</pre></p>
<p>  // res,body,status<br>  const res = ctx.res;<br>  let body = ctx.body;<br>  const code = ctx.status;<br>  console.log(ctx.status);<br>  // ignore body<br>  if (statuses.empty[code]) {<br>    // strip headers<br>    ctx.body = null;<br>    return res.end();<br>  }</p>
<p>  if (â€˜HEADâ€™ === ctx.method) {<br>    if (!res.headersSent &amp;&amp; !ctx.response.has(â€˜Content-Lengthâ€™)) {<br>      const { length } = ctx.response;<br>      if (Number.isInteger(length)) ctx.length = length;<br>    }<br>    return res.end();<br>  }</p>
<p>  // status body<br>  if (null == body) {<br>    if (ctx.req.httpVersionMajor &gt;= 2) {<br>      body = String(code);<br>    } else {<br>      body = ctx.message || String(code);<br>    }<br>    if (!res.headersSent) {<br>      ctx.type = â€˜textâ€™;<br>      ctx.length = Buffer.byteLength(body);<br>    }<br>    return res.end(body);<br>  }</p>
<p>  // responses<br>  if (Buffer.isBuffer(body)) return res.end(body);<br>  if (â€˜stringâ€™ == typeof body) return res.end(body);<br>  if (body instanceof Stream) return body.pipe(res);</p>
<p>  // body: json<br>  body = JSON.stringify(body);<br>  if (!res.headersSent) {<br>    ctx.length = Buffer.byteLength(body);<br>  }<br>  res.end(body);<br>}<br>// context.js<br>const util = require(â€˜utilâ€™);<br>const createError = require(â€˜http-errorsâ€™);<br>const httpAssert = require(â€˜http-assertâ€™);<br>// è®¾ç½®ä»£ç†åº“ å§”æ‰˜ä»£ç†<br>const delegate = require(â€˜delegatesâ€™);<br>// http çŠ¶æ€å·¥å…·åŒ…<br>const statuses = require(â€˜statusesâ€™);<br>// æ“ä½œcookie<br>const Cookies = require(â€˜cookiesâ€™);<br>// å¼ºè°ƒå”¯ä¸€æ€§ï¼Œåªèƒ½åœ¨å½“å‰æ¨¡å—å†…éƒ¨è®¿é—®ï¼Œå…¶å®ƒåœ°æ–¹æ— æ³•è®¿é—®<br>const COOKIES = Symbol(â€˜context#cookiesâ€™);<br>// è·å–cookies<br>  get cookies() {<br>    if (!this[COOKIES]) {<br>      this[COOKIES] = new Cookies(this.req, this.res, {<br>        keys: this.app.keys,<br>        secure: this.request.secure<br>      });<br>    }<br>    return this[COOKIES];<br>  },<br>  // è®¾ç½®cookieå€¼<br>  set cookies(_cookies) {<br>    this[COOKIES] = _cookies;<br>  }<br>  // delegateåº“<br>// delegates<br>// TJ<br>// æ„é€ å‡½æ•°<br>function Delegator(proto, target) {<br>  if (!(this instanceof Delegator)) return new Delegator(proto, target);<br>  this.proto = proto;<br>  this.target = target;<br>  this.methods = [];<br>  this.getters = [];<br>  this.setters = [];<br>  this.fluents = [];<br>}<br>// åŸå‹æ–¹æ³•ï¼Œç”¨äºæŒ‚è½½ æ™®é€šæˆå‘˜æ–¹æ³•<br>Delegator.prototype.method = function(name){<br>  var proto = this.proto;<br>  var target = this.target;<br>  this.methods.push(name);<br>  proto[name] = function(){<br>    return this[target][name].apply(this[target], arguments);<br>  };<br>  return this;<br>};<br>// ç”¨äºåŒæ—¶æŒ‚è½½setter å’Œ getter<br>Delegator.prototype.access = function(name){<br>  return this.getter(name).setter(name);<br>};<br>// ç”¨äºæŒ‚è½½ getter<br>Delegator.prototype.getter = function(name){<br>  var proto = this.proto;<br>  var target = this.target;<br>  this.getters.push(name);<br>  proto.<strong>defineGetter</strong>(name, function(){<br>    return this[target][name];<br>  });<br>  return this;<br>};<br>// ç”¨äºæŒ‚è½½setter<br>Delegator.prototype.setter = function(name){<br>  var proto = this.proto;<br>  var target = this.target;<br>  this.setters.push(name);<br>  proto.<strong>defineSetter</strong>(name, function(val){<br>    return this[target][name] = val;<br>  });<br>  return this;<br>};<br>// è¯»å–æˆ–è®¾ç½®æŸå±æ€§æˆ–æ–¹æ³•<br>Delegator.prototype.fluent = function (name) {<br>  var proto = this.proto;<br>  var target = this.target;<br>  this.fluents.push(name);<br>  proto[name] = function(val){<br>    if (â€˜undefinedâ€™ != typeof val) {<br>      this[target][name] = val;<br>      return this;<br>    } else {<br>      return this[target][name];<br>    }<br>  };<br>  return this;<br>};<br><br>2.Requestå¯¹è±¡è§£è¯»<br>3.Responseå¯¹è±¡è§£è¯»</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/08/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-2-è¯·æ±‚å¤„ç†æµç¨‹è§£è¯»/" data-id="ckbm7472x002hb4xqgw3rlpfr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-vue-cliäº†è§£" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/08/vue-cliäº†è§£/" class="article-date">
  <time datetime="2020-05-08T02:32:20.000Z" itemprop="datePublished">2020-05-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/08/vue-cliäº†è§£/">vue-cliäº†è§£</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä¸€ç›´è§‰å¾—è‡ªå·±å¯¹cliçš„äº†è§£å¤ªå°‘äº†ï¼Œäºæ˜¯æœ‰äº†è¿™ç¯‡æ–‡ç« ï¼Œçœ‹ä¸€ç‚¹æºç å†™ä¸€ç‚¹ä¸œè¥¿å§ï¼Œè‡³äºèƒ½å†™å¤šå°‘ï¼Œå¸Œæœ›æˆ‘åšæŒåˆ°åº•<br>é¦–å…ˆgit clone <a href="https://github.com/vuejs/vue-cli.git" target="_blank" rel="noopener">https://github.com/vuejs/vue-cli.git</a> ä¸‹è½½æºç ï¼Œæƒ³ç€ç”¨vue-cliåˆ›å»ºé¡¹ç›®çš„å‘½ä»¤æ˜¯vue createï¼Œæˆ‘æ‰¾åˆ°äº†packages/@vue/cli/bin/vue.jsæ–‡ä»¶ï¼Œå°±ä»è¿™é‡Œå¼€å§‹å§ã€‚</p>
<pre>
//chalkç”¨äºé«˜äº®ç»ˆç«¯æ‰“å°å‡ºæ¥çš„ä¿¡æ¯ï¼Œsemverç‰ˆæœ¬å·å¤„ç†å·¥å…·
const { chalk, semver } = require('@vue/cli-shared-utils')
//è·å–nodeç‰ˆæœ¬
//"engines": {
//    "node": ">=8.9"
//}
const requiredVersion = require('../package.json').engines.node
//æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¹‹é—´çš„å·®å¼‚
const leven = require('leven')
//å…ˆæ£€æµ‹ä¸‹nodeç‰ˆæœ¬å·æ˜¯ä¸æ˜¯ç¬¦åˆè¦æ±‚ï¼Œä¸ç¬¦åˆæç¤ºæ›´æ–°nodeå¹¶é€€å‡ºè¿›ç¨‹
function checkNodeVersion (wanted, id) {
  if (!semver.satisfies(process.version, wanted)) {
    console.log(chalk.red(
      'You are using Node ' + process.version + ', but this version of ' + id +
      ' requires Node ' + wanted + '.\nPlease upgrade your Node version.'
    ))
    process.exit(1)
  }
}
checkNodeVersion(requiredVersion, '@vue/cli')
//è™½ç„¶å¸Œæœ›ä½ çš„nodeç‰ˆæœ¬é«˜äº8.9ï¼Œä½†æ˜¯è¿™é‡Œè¿˜æ˜¯è´´å¿ƒçš„æç¤ºï¼Œ9.Xç‰ˆæœ¬å¯èƒ½ä¸å†ç»§ç»­æ”¯æŒï¼Œèµ¶ç´§æ›´æ–°ç‰ˆæœ¬ä¸ºé•¿æœŸæ”¯æŒçš„ç‰ˆæœ¬
if (semver.satisfies(process.version, '9.x')) {
  console.log(chalk.red(
    `You are using Node ${process.version}.\n` +
    `Node.js 9.x has already reached end-of-life and will not be supported in future major releases.\n` +
    `It's strongly recommended to use an active LTS version instead.`
  ))
}
const fs = require('fs')
const path = require('path')
//ç”¨äºè½¬æ¢ Windows åæ–œæ è·¯å¾„è½¬æ¢ä¸ºæ­£æ–œæ è·¯å¾„ \ => /
const slash = require('slash')
//è½»é‡çº§çš„å‘½ä»¤è¡Œå‚æ•°è§£æå¼•æ“
const minimist = require('minimist')
// enter debug mode when creating test repo
if (
  slash(process.cwd()).indexOf('/packages/test') > 0 && (
    fs.existsSync(path.resolve(process.cwd(), '../@vue')) ||
    fs.existsSync(path.resolve(process.cwd(), '../../@vue'))
  )
) {
  process.env.VUE_CLI_DEBUG = true
}
//https://www.cnblogs.com/mirandachen/p/9826886.html commanderçš„API
const program = require('commander')//node.jså‘½ä»¤è¡Œç•Œé¢çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ
const loadCommand = require('../lib/util/loadCommand')//å®‰è£…æ£€æµ‹ä»£ç 
program
  .version(`@vue/cli ${require('../package').version}`)
  .usage('< command > [options]')
//è·å–å‘½ä»¤è¡Œå‚æ•°ï¼Œä¼ é€’åˆ°create
program
  .command('create < app-name>')
  .description('create a new project powered by vue-cli-service')
  .option('-p, --preset < presetName>', 'Skip prompts and use saved or remote preset')
  .option('-d, --default', 'Skip prompts and use default preset')
  .option('-i, --inlinePreset < json>', 'Skip prompts and use inline JSON string as preset')
  .option('-m, --packageManager < command>', 'Use specified npm client when installing dependencies')
  .option('-r, --registry < url>', 'Use specified npm registry when installing dependencies (only for npm)')
  .option('-g, --git [message]', 'Force git initialization with initial commit message')
  .option('-n, --no-git', 'Skip git initialization')
  .option('-f, --force', 'Overwrite target directory if it exists')
  .option('--merge', 'Merge target directory if it exists')
  .option('-c, --clone', 'Use git clone when fetching remote preset')
  .option('-x, --proxy', 'Use specified proxy when creating project')
  .option('-b, --bare', 'Scaffold project without beginner instructions')
  .option('--skipGetStarted', 'Skip displaying "Get started" instructions')
  .action((name, cmd) => {
    const options = cleanArgs(cmd)
    if (minimist(process.argv.slice(3))._.length > 1) {
      console.log(chalk.yellow('\n Info: You provided more than one argument. The first one will be used as the app\'s name, the rest are ignored.'))
    }
    // --git makes commander to default git to true
    if (process.argv.includes('-g') || process.argv.includes('--git')) {
      options.forceGit = true
    }
    //æŠŠç»è¿‡å¤„ç†çš„å‘½ä»¤è¡Œå‚æ•°ä¼ é€’åˆ°createä¸­
    require('../lib/create')(name, options)
  })
//è¿™åé¢è¿˜æœ‰ä¸€äº›å‘½ä»¤è¡Œçš„å¤„ç†ï¼Œæˆ‘ä»¬ä¸è´ªå¤šï¼Œå…ˆä»ä¸»è¦è„‰ç»œçœ‹èµ·
</pre>
loadCommand.jsä»£ç 
<pre>
module.exports = function loadCommand (commandName, moduleName) {
  const isNotFoundError = err => {
    return err.message.match(/Cannot find module/)
  }
  try {
    return require(moduleName)
  } catch (err) {
    if (isNotFoundError(err)) {
      try {
        return require('import-global')(moduleName)
      } catch (err2) {
        if (isNotFoundError(err2)) {
          const { chalk, hasYarn, hasPnpm3OrLater } = require('@vue/cli-shared-utils')
          let installCommand = `npm install -g`
          if (hasYarn()) {
            installCommand = `yarn global add`
          } else if (hasPnpm3OrLater()) {
            installCommand = `pnpm install -g`
          }
          console.log()
          console.log(
            `  Command ${chalk.cyan(`vue ${commandName}`)} requires a global addon to be installed.\n` +
            `  Please run ${chalk.cyan(`${installCommand} ${moduleName}`)} and try again.`
          )
          console.log()
          process.exit(1)
        } else {
          throw err2
        }
      }
    } else {
      throw err
    }
  }
}
</pre>
create.js
<pre>
const fs = require('fs-extra')//fs-extraæ¨¡å—æ˜¯ç³»ç»Ÿfsæ¨¡å—çš„æ‰©å±•ï¼Œæä¾›äº†æ›´å¤šä¾¿åˆ©çš„ APIï¼Œå¹¶ç»§æ‰¿äº†fsæ¨¡å—çš„ API
const path = require('path')
const inquirer = require('inquirer')//ç”¨æˆ·ä¸å‘½ä»¤è¡Œäº¤äº’çš„å·¥å…·
const Creator = require('./Creator')
const { clearConsole } = require('./util/clearConsole')
const { getPromptModules } = require('./util/createTools')
const { chalk, error, stopSpinner, exit } = require('@vue/cli-shared-utils')
const validateProjectName = require('validate-npm-package-name')
async function create (projectName, options) {
  //projectName,optionséƒ½æ˜¯ä»å‘½ä»¤è¡Œè·å–çš„
  //projectNameé¡¹ç›®åç§°
  //optionsåˆ›å»ºé¡¹ç›®çš„å‚æ•°
  if (options.proxy) {
    process.env.HTTP_PROXY = options.proxy
  }
  const cwd = options.cwd || process.cwd()
  const inCurrent = projectName === '.'
  const name = inCurrent ? path.relative('../', cwd) : projectName
  const targetDir = path.resolve(cwd, projectName || '.')
  //åˆ¤æ–­é¡¹ç›®åç§°æ˜¯å¦å¯ç”¨
  const result = validateProjectName(name)
  if (!result.validForNewPackages) {
    console.error(chalk.red(`Invalid project name: "${name}"`))
    result.errors && result.errors.forEach(err => {
      console.error(chalk.red.dim('Error: ' + err))
    })
    result.warnings && result.warnings.forEach(warn => {
      console.error(chalk.red.dim('Warning: ' + warn))
    })
    exit(1)
  }
  //åˆ¤æ–­é¡¹ç›®æ˜¯å¦åœ¨å½“å‰ç›®å½•ç”Ÿæˆï¼Œå½“å‰ç›®å½•ä¸‹æ˜¯å¦å·²ç»å­˜åœ¨é¡¹ç›®
  if (fs.existsSync(targetDir) && !options.merge) {
    if (options.force) {
      await fs.remove(targetDir)
    } else {
      await clearConsole()
      if (inCurrent) {
        const { ok } = await inquirer.prompt([
          {
            name: 'ok',
            type: 'confirm',
            message: `Generate project in current directory?`
          }
        ])
        if (!ok) {
          return
        }
      } else {
        const { action } = await inquirer.prompt([
          {
            name: 'action',
            type: 'list',
            message: `Target directory ${chalk.cyan(targetDir)} already exists. Pick an action:`,
            choices: [
              { name: 'Overwrite', value: 'overwrite' },
              { name: 'Merge', value: 'merge' },
              { name: 'Cancel', value: false }
            ]
          }
        ])
        if (!action) {
          return
        } else if (action === 'overwrite') {
          console.log(`\nRemoving ${chalk.cyan(targetDir)}...`)
          await fs.remove(targetDir)
        }
      }
    }
  }
  const creator = new Creator(name, targetDir, getPromptModules())
  await creator.create(options)
}
module.exports = (...args) => {
  return create(...args).catch(err => {
    stopSpinner(false) // do not persist
    error(err)
    if (!process.env.VUE_CLI_TEST) {
      process.exit(1)
    }
  })
}
</pre>
åœ¨packages/@vue/cli/lib/createä¸­ï¼Œé¦–å…ˆé€šè¿‡vlidate-npm-package-nameå¤„ç†åŒ…åæ˜¯å¦åˆè§„ã€‚æ¥ç€åœ¨ç›®æ ‡æ–‡ä»¶å­˜åœ¨çš„æƒ…å†µä¸‹æ¥æä¾›ç”¨æˆ·å¤„ç†ç›®æ ‡æ–‡ä»¶çš„äº¤äº’ã€‚è¿™ä¸€æ®µä»£ç æ¯”è¾ƒå¥½ç†è§£ï¼Œæœ€åç”Ÿæˆcreatorç±»å¹¶è°ƒç”¨äº†creator.createæ–¹æ³•ã€‚
<b>creator.js</b>
<pre>
const path = require('path')
const debug = require('debug')
const inquirer = require('inquirer')
const EventEmitter = require('events')
const Generator = require('./Generator')
const cloneDeep = require('lodash.clonedeep')
//sortObjectæœ‰ä¸‰ä¸ªå‚æ•°(å¯¹è±¡ï¼Œæ’åºå…³é”®å­—ï¼Œä¸æ ¹æ®Unicodeæ’åº)
const sortObject = require('./util/sortObject')
const getVersions = require('./util/getVersions')
const PackageManager = require('./util/ProjectPackageManager')
const { clearConsole } = require('./util/clearConsole')
const PromptModuleAPI = require('./PromptModuleAPI')
const writeFileTree = require('./util/writeFileTree')
const { formatFeatures } = require('./util/features')
const loadLocalPreset = require('./util/loadLocalPreset')
const loadRemotePreset = require('./util/loadRemotePreset')
const generateReadme = require('./util/generateReadme')
const { resolvePkg } = require('@vue/cli-shared-utils')

const {
  defaults,
  saveOptions,
  loadOptions,
  savePreset,
  validatePreset,
  rcPath
} = require('./options')

const {
  chalk,
  execa,

  log,
  warn,
  error,
  logWithSpinner,
  stopSpinner,

  hasGit,
  hasProjectGit,
  hasYarn,
  hasPnpm3OrLater,
  hasPnpmVersionOrLater,

  exit,
  loadModule
} = require('@vue/cli-shared-utils')

const isManualMode = answers => answers.preset === '__manual__'

module.exports = class Creator extends EventEmitter {
  constructor (name, context, promptModules) {
    super()

    this.name = name
    this.context = process.env.VUE_CLI_CONTEXT = context
    const { presetPrompt, featurePrompt } = this.resolveIntroPrompts()
    this.presetPrompt = presetPrompt
    this.featurePrompt = featurePrompt
    this.outroPrompts = this.resolveOutroPrompts()
    this.injectedPrompts = []
    this.promptCompleteCbs = []
    this.afterInvokeCbs = []
    this.afterAnyInvokeCbs = []

    this.run = this.run.bind(this)

    const promptAPI = new PromptModuleAPI(this)
    promptModules.forEach(m => m(promptAPI))
  }

  async create (cliOptions = {}, preset = null) {
    const isTestOrDebug = process.env.VUE_CLI_TEST || process.env.VUE_CLI_DEBUG
    const { run, name, context, afterInvokeCbs, afterAnyInvokeCbs } = this

    if (!preset) {
      if (cliOptions.preset) {
        // vue create foo --preset bar
        preset = await this.resolvePreset(cliOptions.preset, cliOptions.clone)
      } else if (cliOptions.default) {
        // vue create foo --default
        preset = defaults.presets.default
      } else if (cliOptions.inlinePreset) {
        // vue create foo --inlinePreset {...}
        try {
          preset = JSON.parse(cliOptions.inlinePreset)
        } catch (e) {
          error(`CLI inline preset is not valid JSON: ${cliOptions.inlinePreset}`)
          exit(1)
        }
      } else {
        preset = await this.promptAndResolvePreset()
      }
    }

    // clone before mutating
    preset = cloneDeep(preset)
    // inject core service
    preset.plugins['@vue/cli-service'] = Object.assign({
      projectName: name
    }, preset)

    if (cliOptions.bare) {
      preset.plugins['@vue/cli-service'].bare = true
    }

    // legacy support for router
    if (preset.router) {
      preset.plugins['@vue/cli-plugin-router'] = {}

      if (preset.routerHistoryMode) {
        preset.plugins['@vue/cli-plugin-router'].historyMode = true
      }
    }

    // legacy support for vuex
    if (preset.vuex) {
      preset.plugins['@vue/cli-plugin-vuex'] = {}
    }

    const packageManager = (
      cliOptions.packageManager ||
      loadOptions().packageManager ||
      (hasYarn() ? 'yarn' : null) ||
      (hasPnpm3OrLater() ? 'pnpm' : 'npm')
    )
    const pm = new PackageManager({ context, forcePackageManager: packageManager })

    await clearConsole()
    logWithSpinner(`âœ¨`, `Creating project in ${chalk.yellow(context)}.`)
    this.emit('creation', { event: 'creating' })

    // get latest CLI plugin version
    const { latestMinor } = await getVersions()

    // generate package.json with plugin dependencies
    const pkg = {
      name,
      version: '0.1.0',
      private: true,
      devDependencies: {},
      ...resolvePkg(context)
    }
    const deps = Object.keys(preset.plugins)
    deps.forEach(dep => {
      if (preset.plugins[dep]._isPreset) {
        return
      }

      // Note: the default creator includes no more than `@vue/cli-*` & `@vue/babel-preset-env`,
      // so it is fine to only test `@vue` prefix.
      // Other `@vue/*` packages' version may not be in sync with the cli itself.
      pkg.devDependencies[dep] = (
        preset.plugins[dep].version ||
        ((/^@vue/.test(dep)) ? `~${latestMinor}` : `latest`)
      )
    })

    // write package.json
    await writeFileTree(context, {
      'package.json': JSON.stringify(pkg, null, 2)
    })

    // intilaize git repository before installing deps
    // so that vue-cli-service can setup git hooks.
    const shouldInitGit = this.shouldInitGit(cliOptions)
    if (shouldInitGit) {
      logWithSpinner(`ğŸ—ƒ`, `Initializing git repository...`)
      this.emit('creation', { event: 'git-init' })
      await run('git init')
    }

    // install plugins
    stopSpinner()
    log(`âš™\u{fe0f}  Installing CLI plugins. This might take a while...`)
    log()
    this.emit('creation', { event: 'plugins-install' })

    if (isTestOrDebug && !process.env.VUE_CLI_TEST_DO_INSTALL_PLUGIN) {
      // in development, avoid installation process
      await require('./util/setupDevProject')(context)
    } else {
      await pm.install()
    }

    // run generator
    log(`ğŸš€  Invoking generators...`)
    this.emit('creation', { event: 'invoking-generators' })
    const plugins = await this.resolvePlugins(preset.plugins)
    const generator = new Generator(context, {
      pkg,
      plugins,
      afterInvokeCbs,
      afterAnyInvokeCbs
    })
    await generator.generate({
      extractConfigFiles: preset.useConfigFiles
    })

    // install additional deps (injected by generators)
    log(`ğŸ“¦  Installing additional dependencies...`)
    this.emit('creation', { event: 'deps-install' })
    log()
    if (!isTestOrDebug) {
      await pm.install()
    }

    // run complete cbs if any (injected by generators)
    logWithSpinner('âš“', `Running completion hooks...`)
    this.emit('creation', { event: 'completion-hooks' })
    for (const cb of afterInvokeCbs) {
      await cb()
    }
    for (const cb of afterAnyInvokeCbs) {
      await cb()
    }

    // generate README.md
    stopSpinner()
    log()
    logWithSpinner('ğŸ“„', 'Generating README.md...')
    await writeFileTree(context, {
      'README.md': generateReadme(generator.pkg, packageManager)
    })

    // generate a .npmrc file for pnpm, to persist the `shamefully-flatten` flag
    if (packageManager === 'pnpm') {
      const pnpmConfig = hasPnpmVersionOrLater('4.0.0')
        ? 'shamefully-hoist=true\n'
        : 'shamefully-flatten=true\n'

      await writeFileTree(context, {
        '.npmrc': pnpmConfig
      })
    }

    // commit initial state
    let gitCommitFailed = false
    if (shouldInitGit) {
      await run('git add -A')
      if (isTestOrDebug) {
        await run('git', ['config', 'user.name', 'test'])
        await run('git', ['config', 'user.email', 'test@test.com'])
      }
      const msg = typeof cliOptions.git === 'string' ? cliOptions.git : 'init'
      try {
        await run('git', ['commit', '-m', msg])
      } catch (e) {
        gitCommitFailed = true
      }
    }

    // log instructions
    stopSpinner()
    log()
    log(`ğŸ‰  Successfully created project ${chalk.yellow(name)}.`)
    if (!cliOptions.skipGetStarted) {
      log(
        `ğŸ‘‰  Get started with the following commands:\n\n` +
        (this.context === process.cwd() ? `` : chalk.cyan(` ${chalk.gray('$')} cd ${name}\n`)) +
        chalk.cyan(` ${chalk.gray('$')} ${packageManager === 'yarn' ? 'yarn serve' : packageManager === 'pnpm' ? 'pnpm run serve' : 'npm run serve'}`)
      )
    }
    log()
    this.emit('creation', { event: 'done' })

    if (gitCommitFailed) {
      warn(
        `Skipped git commit due to missing username and email in git config.\n` +
        `You will need to perform the initial commit yourself.\n`
      )
    }

    generator.printExitLogs()
  }

  run (command, args) {
    if (!args) { [command, ...args] = command.split(/\s+/) }
    return execa(command, args, { cwd: this.context })
  }

  async promptAndResolvePreset (answers = null) {
    // prompt
    if (!answers) {
      await clearConsole(true)
      answers = await inquirer.prompt(this.resolveFinalPrompts())
    }
    debug('vue-cli:answers')(answers)

    if (answers.packageManager) {
      saveOptions({
        packageManager: answers.packageManager
      })
    }

    let preset
    if (answers.preset && answers.preset !== '__manual__') {
      preset = await this.resolvePreset(answers.preset)
    } else {
      // manual
      preset = {
        useConfigFiles: answers.useConfigFiles === 'files',
        plugins: {}
      }
      answers.features = answers.features || []
      // run cb registered by prompt modules to finalize the preset
      this.promptCompleteCbs.forEach(cb => cb(answers, preset))
    }

    // validate
    validatePreset(preset)

    // save preset
    if (answers.save && answers.saveName && savePreset(answers.saveName, preset)) {
      log()
      log(`ğŸ‰  Preset ${chalk.yellow(answers.saveName)} saved in ${chalk.yellow(rcPath)}`)
    }

    debug('vue-cli:preset')(preset)
    return preset
  }

  async resolvePreset (name, clone) {
    let preset
    const savedPresets = loadOptions().presets || {}

    if (name in savedPresets) {
      preset = savedPresets[name]
    } else if (name.endsWith('.json') || /^\./.test(name) || path.isAbsolute(name)) {
      preset = await loadLocalPreset(path.resolve(name))
    } else if (name.includes('/')) {
      logWithSpinner(`Fetching remote preset ${chalk.cyan(name)}...`)
      this.emit('creation', { event: 'fetch-remote-preset' })
      try {
        preset = await loadRemotePreset(name, clone)
        stopSpinner()
      } catch (e) {
        stopSpinner()
        error(`Failed fetching remote preset ${chalk.cyan(name)}:`)
        throw e
      }
    }

    // use default preset if user has not overwritten it
    if (name === 'default' && !preset) {
      preset = defaults.presets.default
    }
    if (!preset) {
      error(`preset "${name}" not found.`)
      const presets = Object.keys(savedPresets)
      if (presets.length) {
        log()
        log(`available presets:\n${presets.join(`\n`)}`)
      } else {
        log(`you don't seem to have any saved preset.`)
        log(`run vue-cli in manual mode to create a preset.`)
      }
      exit(1)
    }
    return preset
  }

  // { id: options } => [{ id, apply, options }]
  async resolvePlugins (rawPlugins) {
    // ensure cli-service is invoked first
    rawPlugins = sortObject(rawPlugins, ['@vue/cli-service'], true)
    const plugins = []
    for (const id of Object.keys(rawPlugins)) {
      const apply = loadModule(`${id}/generator`, this.context) || (() => {})
      let options = rawPlugins[id] || {}
      if (options.prompts) {
        const prompts = loadModule(`${id}/prompts`, this.context)
        if (prompts) {
          log()
          log(`${chalk.cyan(options._isPreset ? `Preset options:` : id)}`)
          options = await inquirer.prompt(prompts)
        }
      }
      plugins.push({ id, apply, options })
    }
    return plugins
  }

  getPresets () {
    const savedOptions = loadOptions()
    return Object.assign({}, savedOptions.presets, defaults.presets)
  }

  resolveIntroPrompts () {
    const presets = this.getPresets()
    const presetChoices = Object.keys(presets).map(name => {
      return {
        name: `${name} (${formatFeatures(presets[name])})`,
        value: name
      }
    })
    const presetPrompt = {
      name: 'preset',
      type: 'list',
      message: `Please pick a preset:`,
      choices: [
        ...presetChoices,
        {
          name: 'Manually select features',
          value: '__manual__'
        }
      ]
    }
    const featurePrompt = {
      name: 'features',
      when: isManualMode,
      type: 'checkbox',
      message: 'Check the features needed for your project:',
      choices: [],
      pageSize: 10
    }
    return {
      presetPrompt,
      featurePrompt
    }
  }

  resolveOutroPrompts () {
    const outroPrompts = [
      {
        name: 'useConfigFiles',
        when: isManualMode,
        type: 'list',
        message: 'Where do you prefer placing config for Babel, ESLint, etc.?',
        choices: [
          {
            name: 'In dedicated config files',
            value: 'files'
          },
          {
            name: 'In package.json',
            value: 'pkg'
          }
        ]
      },
      {
        name: 'save',
        when: isManualMode,
        type: 'confirm',
        message: 'Save this as a preset for future projects?',
        default: false
      },
      {
        name: 'saveName',
        when: answers => answers.save,
        type: 'input',
        message: 'Save preset as:'
      }
    ]

    // ask for packageManager once
    const savedOptions = loadOptions()
    if (!savedOptions.packageManager && (hasYarn() || hasPnpm3OrLater())) {
      const packageManagerChoices = []

      if (hasYarn()) {
        packageManagerChoices.push({
          name: 'Use Yarn',
          value: 'yarn',
          short: 'Yarn'
        })
      }

      if (hasPnpm3OrLater()) {
        packageManagerChoices.push({
          name: 'Use PNPM',
          value: 'pnpm',
          short: 'PNPM'
        })
      }

      packageManagerChoices.push({
        name: 'Use NPM',
        value: 'npm',
        short: 'NPM'
      })

      outroPrompts.push({
        name: 'packageManager',
        type: 'list',
        message: 'Pick the package manager to use when installing dependencies:',
        choices: packageManagerChoices
      })
    }

    return outroPrompts
  }

  resolveFinalPrompts () {
    // patch generator-injected prompts to only show in manual mode
    this.injectedPrompts.forEach(prompt => {
      const originalWhen = prompt.when || (() => true)
      prompt.when = answers => {
        return isManualMode(answers) && originalWhen(answers)
      }
    })
    const prompts = [
      this.presetPrompt,
      this.featurePrompt,
      ...this.injectedPrompts,
      ...this.outroPrompts
    ]
    debug('vue-cli:prompts')(prompts)
    return prompts
  }

  shouldInitGit (cliOptions) {
    if (!hasGit()) {
      return false
    }
    // --git
    if (cliOptions.forceGit) {
      return true
    }
    // --no-git
    if (cliOptions.git === false || cliOptions.git === 'false') {
      return false
    }
    // default: true unless already in a git repo
    return !hasProjectGit(this.context)
  }
}
</pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/08/vue-cliäº†è§£/" data-id="ckbm74775004lb4xqu79swhl0" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-1-Koaç±»æ„é€ å‡½æ•°è®¾è®¡" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/07/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-1-Koaç±»æ„é€ å‡½æ•°è®¾è®¡/" class="article-date">
  <time datetime="2020-05-07T07:09:50.000Z" itemprop="datePublished">2020-05-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/07/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-1-Koaç±»æ„é€ å‡½æ•°è®¾è®¡/">ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2.2.1-Koaç±»æ„é€ å‡½æ•°è®¾è®¡</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.é›†æˆEmitter<br>æˆ‘ä»¬æ‰¾åˆ°node_modulesæ–‡ä»¶å¤¹ä¸‹çš„koaæ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°package.jsonæ–‡ä»¶ï¼Œçœ‹åˆ°mainä¸­çš„å…¥å£æ–‡ä»¶æ˜¯lib/application.jsï¼Œæ‰“å¼€application.js</p>
<p><pre><br>// åˆ¤æ–­æ˜¯å¦ä¸º genterator æ–¹æ³•(koaæ˜¯åŸºäºasync/awaitï¼Œè€Œasync/awaitæ˜¯åŸºäºgeneratorå‡½æ•°çš„)<br>const isGeneratorFunction = require(â€˜is-generator-functionâ€™);<br>// è®¾ç½®debugçš„å‘½æ˜ç©ºé—´<br>const debug = require(â€˜debugâ€™)(â€˜koa:applicationâ€™);<br>// å½“è¯·æ±‚å®Œæˆæ—¶æ‰§è¡Œçš„ä¸€ä¸ªå›è°ƒ<br>const onFinished = require(â€˜on-finishedâ€™);<br>// å¼•å…¥ response<br>const response = require(â€˜./responseâ€™);<br>// ä¸­é—´ä»¶æœºåˆ¶ã€å‰¥æ´‹è‘±æ¨¡å‹<br>const compose = require(â€˜koa-composeâ€™);<br>// å¼•å…¥ context<br>const context = require(â€˜./contextâ€™);<br>// å¼•å…¥ request<br>const request = require(â€˜./requestâ€™);<br>// ç”¨äºåˆ¤æ–­httpçŠ¶æ€çš„å·¥å…·åŒ…<br>const statuses = require(â€˜statusesâ€™);<br>// Node åŸç”Ÿäº‹ä»¶é©±åŠ¨æ¨¡å—<br>const Emitter = require(â€˜eventsâ€™);<br>// Node åŸç”Ÿå·¥å…·åŒ…æ¨¡å—<br>const util = require(â€˜utilâ€™);<br>// Node åŸç”ŸStreamæ¨¡å—<br>const Stream = require(â€˜streamâ€™);<br>// Node åŸç”Ÿhttpæ¨¡å—<br>const http = require(â€˜httpâ€™);<br>// ç”¨äºè¿”å›å¯¹è±¡æŒ‡å®šçš„å±æ€§<br>const only = require(â€˜onlyâ€™);<br>// å°†åŸºäºkoaç”Ÿæˆå™¨ä¸­é—´ä»¶è½¬æ¢æˆåŸºäºPromiseçš„ä¸­é—´ä»¶<br>const convert = require(â€˜koa-convertâ€™);<br>// ç»™å‡ºä¸€äº›ä¿¡æ¯<br>const deprecate = require(â€˜depdâ€™)(â€˜koaâ€™);<br>// ç”¨å¤„åˆ›å»ºHttp Errorçš„æ¨¡å—<br>const { HttpError } = require(â€˜http-errorsâ€™);<br></pre><br>2.æ„é€ å‡½æ•°<br>æˆ‘ä»¬çœ‹åˆ°ï¼Œapplication.jsé‡Œè¾¹æœ‰è¿™æ ·çš„ä»£ç <br>module.exports = class Application extends Emitter<br>nodeæ˜¯åŸºäºäº‹ä»¶å¤„ç†çš„ï¼Œè¿™é‡Œç»§æ‰¿äº†nodeçš„eventæ¨¡å—ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­çœ‹åˆ°<br>constructor(options) {<br>    // è°ƒç”¨çˆ¶ç±»è¿›è¡Œæ„é€ <br>    super();<br>    // è®¾ç½®ä¸€äº›åˆå§‹å€¼<br>    options = options || {};<br>    this.proxy = options.proxy || false;<br>    this.subdomainOffset = options.subdomainOffset || 2;<br>    this.proxyIpHeader = options.proxyIpHeader || â€˜X-Forwarded-Forâ€™;<br>    this.maxIpsCount = options.maxIpsCount || 0;<br>    // åŒºåˆ†å¼€å‘ç¯å¢ƒè¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒ<br>    this.env = options.env || process.env.NODE_ENV || â€˜developmentâ€™;<br>    if (options.keys) this.keys = options.keys;<br>    // å°†ä¸­é—´ä»¶ä¿å­˜åˆ°æ•°ç»„ä¸­<br>    this.middleware = [];<br>    this.context = Object.create(context);<br>    this.request = Object.create(request);<br>    this.response = Object.create(response);<br>    if (util.inspect.custom) {<br>      this[util.inspect.custom] = this.inspect;<br>    }<br> }<br><br>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬new Koa()çš„æ—¶å€™æ˜¯å¯ä»¥æ ¹æ®éœ€è¦ä¼ é€’å‚æ•°çš„ï¼Œåœ¨è¿™é‡Œè€å¸ˆè®²äº†ä¸€ä¸‹æ¯ä¸ªå‚æ•°çš„æ„ä¹‰ï¼Œéƒ¨åˆ†å†™äº†æ³¨é‡Š<br>3.åˆå§‹åŒ–åŠŸèƒ½<br>ç»§ç»­çœ‹application.jsæ–‡ä»¶çš„Applicationçš„listen</p>
<p><pre><br>//ç›‘å¬ç«¯å£ï¼Œå¯åŠ¨æœåŠ¡<br>listen(â€¦args) {<br>    debug(â€˜listenâ€™);<br>    //åˆ©ç”¨httpæ¨¡å—åˆ›å»ºæœåŠ¡ï¼Œä¼ å…¥å›è°ƒå‡½æ•°ï¼Œä»¥åŠç›‘å¬ç«¯å£<br>    const server = http.createServer(this.callback());<br>    return server.listen(â€¦args);<br>}<br>//app.callback()<br>//æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ª(req,res)=&gt;{}<br>//æ„å»ºäº†ctx<br>callback() {<br>    const fn = compose(this.middleware);</pre></p>
<pre><code>if (!this.listenerCount(&apos;error&apos;)) this.on(&apos;error&apos;, this.onerror);

const handleRequest = (req, res) =&gt; {
  const ctx = this.createContext(req, res);
  return this.handleRequest(ctx, fn);
};

return handleRequest;
</code></pre><p>}<br>//ç”¨äºæ„å»ºä¸Šä¸‹æ–‡å¯¹è±¡<br>createContext(req, res) {<br>    const context = Object.create(this.context);<br>    const request = context.request = Object.create(this.request);<br>    const response = context.response = Object.create(this.response);<br>    context.app = request.app = response.app = this;<br>    context.req = request.req = response.req = req;<br>    context.res = request.res = response.res = res;<br>    request.ctx = response.ctx = context;<br>    request.response = response;<br>    response.request = request;<br>    context.originalUrl = request.originalUrl = req.url;<br>    context.state = {};<br>    return context;<br>}<br><br>4.ç®€å•æ¨¡æ‹Ÿæœ¬èŠ‚è¯¾å†…å®¹<br>æ–°å»ºä¸€ä¸ªé¡¹ç›®simple-koaï¼Œå»ºç«‹æ–‡ä»¶å¤¹libï¼Œç„¶åtouch application.js</p>
<p><pre><br>const http = require(â€˜httpâ€™);</pre></p>
<p>class Application {<br>    constructor() {<br>        this.callbackFunc;<br>    }</p>
<pre><code>listen(...args) {
    let server = http.createServer(this.callback());
    server.listen(...args);
}

use(fn) {
    this.callbackFunc = fn;
}

callback() {
    return (req, res) =&gt; {
        this.callbackFunc(req, res);
    };
}
</code></pre><p>}</p>
<p>module.exports = Application;<br><br>åœ¨æ ¹æ–‡ä»¶å¤¹ä¸‹touch demo.js</p>
<p><pre><br>const Koa = require(â€˜./lib/applicationâ€™);<br>const app = new Koa();</pre></p>
<p>app.use((req, res) =&gt; {<br>    res.writeHeader(500);<br>    res.end(â€˜Server Errorâ€™);<br>});</p>
<p>app.listen(3000, () =&gt; {<br>    console.log(â€˜hello Simple Koaâ€™);<br>});<br><br>åˆæ­¥æ¨¡æ‹Ÿäº†koaçš„åˆå§‹åŒ–ã€‚å¦å¤–è¿™é‡Œè€å¸ˆä»‹ç»äº†nodemonï¼Œè¿™ä¸ªæ’ä»¶å°±æ˜¯nodeçš„çƒ­é‡å¯ï¼Œå®‰è£…åœ¨å¼€å‘ç¯å¢ƒå°±å¥½</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/07/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-2-1-Koaç±»æ„é€ å‡½æ•°è®¾è®¡/" data-id="ckbm7472w002gb4xqzy1vw3nz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-1-1-Koaæ•´ä½“ç»“æ„" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/06/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-1-1-Koaæ•´ä½“ç»“æ„/" class="article-date">
  <time datetime="2020-05-06T00:45:43.000Z" itemprop="datePublished">2020-05-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/06/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-1-1-Koaæ•´ä½“ç»“æ„/">ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2.1.1-Koaæ•´ä½“ç»“æ„</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.webå¼€å‘æ¡†æ¶å†å²<br>Node.jsæœ¬èº«å°±æ˜¯webå¼€å‘æ¡†æ¶ï¼Œåœ¨nodeä¸­ä¸»è¦ç”¨äºwebæœåŠ¡å™¨çš„æ¨¡å—å°±æ˜¯httpæ¨¡å—ï¼Œä¸‹é¢æˆ‘ä»¬å›å¿†ä¸‹å¦‚ä½•ä½¿ç”¨httpæ¨¡å—ã€‚åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿›å…¥æ–‡ä»¶å¤¹ï¼Œæ•°é¢å…¥npm init -yåˆå§‹åŒ–é¡¹ç›®ã€‚<br>http-server.js</p>
<pre>
const http = require('http')
http.createServer(function(req,res){
    res.end('Hello World')
}).listen(3000,function(){
    console.log('æœåŠ¡å¯åŠ¨æˆåŠŸ')
})
</pre>
ä½¿ç”¨nodeçš„httpæ¨¡å—åˆ›å»ºä¸€ä¸ªhttpæœåŠ¡è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘ä¸­ä¼šæœ‰æ›´å¤æ‚çš„éœ€æ±‚ï¼Œæ‰€ä»¥æœ‰äº†åŸºäºnodejsçš„æ¡†æ¶ï¼Œexpressæ˜¯å…¶ä¸­ä¹‹ä¸€
express-server.js
<pre>
const express = require('express');
const app = express()
app.get('/',function(req,res){
    res.send('hello world')
})
app.listen(3000)
</pre>
å½“ç„¶expressçš„åŠŸèƒ½ä¸ä»…ä»…æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬æ‰¾ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„å®ç°ä¸€ä¸‹ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªpublicæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ”¾å…¥ä¸€äº›é™æ€èµ„æºï¼Œå¹¶å°†express-server.jsè¿›è¡Œç®€å•ä¿®æ”¹
<pre>
const express = require('express');
const app = express();
app.use(express.static('public'));
app.listen(3000);
</pre>
å°±å¯ä»¥çœ‹åˆ°publicä¸­çš„é¡µé¢ï¼Œè¿™æ˜¯expressä¸­é—´ä»¶çš„ç®€å•ä½¿ç”¨ã€‚
koaæ˜¯expresså¼€å‘å›¢é˜ŸåŸºäºnode.jså¹³å°çš„ä¸‹ä¸€ä»£å¼€å‘æ¡†æ¶
koa-server.js
<pre>
const Koa = require('koa');
const app = new Koa();
app.use(async ctx => {
    ctx.body = 'hello world!';
});
app.listen(3000)
</pre>
åœ¨expressä¸­æ˜¯å†…ç½®ä¸­é—´ä»¶çš„ï¼Œä½†æ˜¯åœ¨koaä¸­æŠŠä¸­é—´ä»¶åˆ†å¼€ï¼Œæˆ‘ä»¬å¦‚æœæƒ³ä½¿ç”¨koaçš„ä¸­é—´ä»¶éœ€è¦å®‰è£…koa-staticï¼Œå¼•å…¥ä¸­é—´ä»¶ä¹‹åï¼Œæˆ‘ä»¬ä¿®æ”¹ä»£ç ä½¿ç”¨ä¸­é—´ä»¶
<pre>
const Koa = require('koa');
const app = new Koa();
const static = require('koa-static');

app.use(static(__dirname + '/public'));
app.listen(3000)
</pre>
é‡å¯æœåŠ¡çœ‹åˆ°ä¸expressä½¿ç”¨ä¸­é—´ä»¶ä¸€æ ·çš„æ•ˆæœï¼Œå³çœ‹åˆ°publicæ–‡ä»¶å¤¹ä¸‹çš„é™æ€èµ„æº 
2.Koaæºç ç›®å½•ç»“æ„
3.Koaä¸»æµç¨‹æ¢³ç†
åœ¨æˆ‘ä»¬åˆ›å»ºçš„é¡¹ç›®ä¸­æ–°å»ºflow-analysis.js
<pre>
const Koa = require('koa');
const app = new Koa();
// x-response-time
app.use(async (ctx, next) => {
    const start = Date.now();                           // â‘ 
    await next();                                                   //  â‘¡
    const ms = Date.now() - start;                  // â‘§
    ctx.set('X-Response-Time', `${ms}ms`);  // â‘¨
});
//logger
app.use(async (ctx, next) => {
    const start = Date.now();                           // â‘¢
    await next();                                                      // â‘£
    const ms = Date.now() - start;                     // â‘¥
    console.log(`${ctx.method} ${ctx.url} - ${ms}ms`);   // â‘¦
});
// response
app.use(async ctx => { 
    ctx.body = 'Hello Wolrd';                                   // â‘¤
});
app.listen(3000);

/**
 *  æ‰§è¡Œè¿‡ç¨‹ï¼š
 *  1. åˆ›å»ºä¸€ä¸ªè·Ÿè¸ªå“åº”æ—¶é—´çš„ æ—¶é—´æˆ³
 *  2.  ç­‰å¾…ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æ‰§è¡Œå®Œæ¯•
 *  3. åˆ›å»ºå¦ä¸€ä¸ªloggerçš„æŒç»­æ—¶é—´
 *  4. ç­‰å¾…ä¸‹ä¸€ä¸ªä¸­é—´ä»¶æ‰§è¡Œå®Œæ¯•
 *  5. å°†å“åº”ä½“è®¾ç½®ä¸º 'hello world'
 *  6. è®¡ç®—å‡ºloggerçš„æŒç»­æ—¶é—´
 *  7. è¾“å‡ºlogger
 *  8. è®¡ç®—å“åº”çš„æŒç»­æ˜¯æŒ‰
 *  9. å°† x-response-time å“åº”å¤´è®¾ç½®å¥½
 *  10. äº¤ç»™koaå¤„ç†
 */
</pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/06/ç½‘æ˜“å¾®ä¸“ä¸š-node-Koaæºç åˆ†æ-2-1-1-Koaæ•´ä½“ç»“æ„/" data-id="ckbm7472w002fb4xqikw6ytu5" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-ç½‘æ˜“å¾®ä¸“ä¸šç¦åˆ©æœŸ-3-3-å¼‚æ­¥ç¼–ç¨‹æ–¹æ³•-å‘å¸ƒ-è®¢é˜…" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/05/05/ç½‘æ˜“å¾®ä¸“ä¸šç¦åˆ©æœŸ-3-3-å¼‚æ­¥ç¼–ç¨‹æ–¹æ³•-å‘å¸ƒ-è®¢é˜…/" class="article-date">
  <time datetime="2020-05-05T09:39:21.000Z" itemprop="datePublished">2020-05-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/05/05/ç½‘æ˜“å¾®ä¸“ä¸šç¦åˆ©æœŸ-3-3-å¼‚æ­¥ç¼–ç¨‹æ–¹æ³•-å‘å¸ƒ-è®¢é˜…/">ç½‘æ˜“å¾®ä¸“ä¸šç¦åˆ©æœŸ-3.3-å¼‚æ­¥ç¼–ç¨‹æ–¹æ³•-å‘å¸ƒ/è®¢é˜…</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.ç†è§£å‘å¸ƒ/è®¢é˜…<br>2.å®ç°å‘å¸ƒ/è®¢é˜…<br>3.Node.jsçš„å‘å¸ƒ/è®¢é˜…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/05/05/ç½‘æ˜“å¾®ä¸“ä¸šç¦åˆ©æœŸ-3-3-å¼‚æ­¥ç¼–ç¨‹æ–¹æ³•-å‘å¸ƒ-è®¢é˜…/" data-id="ckbm7473r003qb4xqn8l8bl37" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-æ•°æ®ç»“æ„-æ ‘å’ŒäºŒå‰æ ‘" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/29/æ•°æ®ç»“æ„-æ ‘å’ŒäºŒå‰æ ‘/" class="article-date">
  <time datetime="2020-04-29T02:52:30.000Z" itemprop="datePublished">2020-04-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/29/æ•°æ®ç»“æ„-æ ‘å’ŒäºŒå‰æ ‘/">æ•°æ®ç»“æ„-æ ‘å’ŒäºŒå‰æ ‘</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p></p><h2>æ ‘å½¢ç»“æ„</h2><br>æ ‘å½¢ç»“æ„æ˜¯ä¸€ç±»é‡è¦çš„éçº¿æ€§æ•°æ®ç»“æ„ã€‚<br>æ ‘æ˜¯n(n &gt;= 0)ä¸ªç»“ç‚¹çš„æœ‰é™é›†ã€‚åœ¨ä»»æ„ä¸€æ£µéç©ºæ ‘ä¸­:<br>(1)æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç‰¹å®šçš„ç§°ä¸ºæ ¹(Root)çš„ç»“ç‚¹<br>(2)å½“n &gt; 1æ—¶ï¼Œå…¶ä½™ç»“ç‚¹å¯åˆ†ä¸ºm(m &gt; 0)ä¸ªäº’ä¸ç›¸äº¤çš„æœ‰é™é›†T<sub>1</sub>,T<sub>2</sub>,â€¦,T<sub>M</sub>ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªé›†åˆæœ¬èº«åˆæ˜¯ä¸€æ£µæ ‘ï¼Œå¹¶ä¸”ç§°ä¸ºæ ¹çš„å­æ ‘ã€‚<br>æ ‘çš„<b>ç»“ç‚¹</b>åŒ…å«ä¸€ä¸ªæ•°æ®å…ƒç´ åŠè‹¥å¹²æŒ‡å‘å…¶å­æ ‘çš„åˆ†æ”¯ã€‚ç»“ç‚¹æ‹¥æœ‰çš„å­æ ‘ç§°ä¸º<b>ç»“ç‚¹çš„åº¦</b>(Degree)ã€‚åº¦ä¸º0çš„ç»“ç‚¹ç§°ä¸º<b>å¶å­</b>(Leaf)æˆ–<b>ç»ˆç«¯ç»“ç‚¹</b>ã€‚åº¦ä¸ä¸º0çš„ç»“ç‚¹ç§°ä¸º<b>éç»ˆç«¯ç»“ç‚¹</b>æˆ–<b>åˆ†æ”¯ç»“ç‚¹</b>ã€‚<b>æ ‘çš„åº¦</b>æ˜¯æ ‘å†…å„ç»“ç‚¹çš„åº¦çš„æœ€å¤§å€¼ã€‚ç»“ç‚¹çš„å­æ ‘çš„æ ¹ç§°ä¸ºè¯¥ç»“ç‚¹çš„<b>å­©å­</b>(Child)ï¼Œç›¸åº”çš„ï¼Œè¯¥ç»“ç‚¹ç§°ä¸ºå­©å­çš„<b>åŒäº²</b>(Parent)ã€‚åŒä¸€åŒäº²çš„å­©å­ä¹‹é—´äº’ç§°<b>å…„å¼Ÿ</b>ã€‚ç»“ç‚¹çš„<b>ç¥–å…ˆ</b>æ˜¯ä»æ ¹åˆ°è¯¥ç»“ç‚¹æ‰€ç»åˆ†æ”¯ä¸Šçš„æ‰€æœ‰ç»“ç‚¹ã€‚ä»¥æŸç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­ä»»ä¸€ç»“ç‚¹éƒ½ç§°ä¸ºè¯¥ç»“ç‚¹çš„<b>å­å­™</b>ã€‚<br>ç»“ç‚¹çš„<b>å±‚æ¬¡</b>(Level)æ˜¯ä»æ ¹å¼€å§‹å®šä¹‰èµ·ï¼Œæ ¹ä¸ºç¬¬ä¸€å±‚ï¼Œæ ¹çš„å­©å­ä¸ºç¬¬äºŒå±‚ã€‚å…¶åŒäº²åœ¨åŒä¸€å±‚çš„ç»“ç‚¹äº’ä¸º<b>å ‚å…„å¼Ÿ</b>ã€‚æ ‘ä¸­ç»“ç‚¹çš„æœ€å¤§å±‚æ¬¡ç§°ä¸ºæ ‘çš„<b>æ·±åº¦</b>(Depth)æˆ–é«˜åº¦ã€‚<br>å¦‚æœå°†æ ‘ä¸­ç»“ç‚¹çš„å„å­æ ‘çœ‹æˆä»å·¦è‡³å³æ˜¯æœ‰åºæ¬¡çš„(å³ä¸èƒ½äº’æ¢)ï¼Œåˆ™æˆè¯¥æ ‘ä¸º<b>æœ‰åºæ ‘</b>ï¼Œå¦åˆ™ç§°ä¸º<b>æ— åºæ ‘</b>ã€‚åœ¨æœ‰åºæ ‘ä¸­æœ€å·¦è¾¹çš„å­æ ‘çš„æ ¹ç§°ä¸ºç¬¬ä¸€ä¸ªå­©å­ï¼Œæœ€å³è¾¹çš„ç§°ä¸ºæœ€åä¸€ä¸ªå­©å­ã€‚<br><b>æ£®æ—</b>(Forest)æ˜¯m(m &gt;= 0)æ£µäº’ä¸ç›¸äº¤çš„æ ‘çš„é›†åˆã€‚å¯¹æ ‘ä¸­æ¯ä¸ªç»“ç‚¹è€Œè¨€ï¼Œå…¶å­æ ‘çš„é›†åˆå³ä¸ºæ£®æ—ã€‚ç”±æ­¤ï¼Œä¹Ÿå¯ä»¥æ£®æ—å’Œæ ‘ç›¸äº’é€’å½’çš„å®šä¹‰æ¥æè¿°æ ‘ã€‚<br>å°±é€»è¾‘ç»“æ„è€Œè¨€ï¼Œä»»ä½•ä¸€æ£µæ ‘æ˜¯ä¸€ä¸ªäºŒå…ƒç»„Tree=(root,F)ï¼Œå…¶ä¸­:rootæ˜¯æ•°æ®å…ƒç´ ï¼Œç§°ä½œæ ‘çš„æ ¹ç»“ç‚¹ï¼›Fæ˜¯m(m &gt;= 0)æ£µæ ‘çš„æ£®æ—ï¼ŒF=(T<sub>1</sub>,T<sub>2</sub>,â€¦,T<sub>M</sub>)ï¼Œå…¶ä¸­T<sub>i</sub>=(r<sub>i</sub>,F<sub>i</sub>)ç§°åšæ ¹rootçš„ç¬¬iæ£µå­æ ‘ï¼›å½“m!=0æ—¶ï¼Œåœ¨æ ‘æ ¹å’Œå…¶å­æ ‘æ£®æ—ä¹‹é—´å­˜åœ¨ä¸‹åˆ—å…³ç³»:<br>RF = { &lt; root,r<sub>i</sub> &gt; | i = 1,2,â€¦,m,m &gt; 0}<br>è¿™ä¸ªå®šä¹‰å°†æœ‰åŠ©äºå¾—åˆ°æ£®æ—å’Œæ ‘ä¸äºŒå‰æ ‘ä¹‹é—´è½¬æ¢çš„é€’å½’å®šä¹‰ã€‚<p></p>
<p></p><h3>äºŒå‰æ ‘</h3><br><b>äºŒå‰æ ‘</b>(Binary Tree)æ˜¯å¦ä¸€ç§æ ‘å½¢ç»“æ„ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯æ¯ä¸ªç»“ç‚¹è‡³å¤šåªæœ‰ä¸¤æ£µå­æ ‘(å³äºŒå‰æ ‘ä¸­ä¸å­˜åœ¨åº¦å¤§äº2çš„ç»“ç‚¹)ï¼Œå¹¶ä¸”ï¼ŒäºŒå‰æ ‘çš„å­æ ‘æœ‰å·¦å³ä¹‹åˆ†ï¼Œå…¶æ¬¡åºä¸èƒ½ä»»æ„é¢ å€’ã€‚<p></p>
<p></p><h6>äºŒå‰æ ‘çš„é‡è¦ç‰¹æ€§</h6><br>1.åœ¨äºŒå‰æ ‘çš„ç¬¬iå±‚ä¸Šè‡³å¤šæœ‰2<sup>i-1</sup>ä¸ªç»“ç‚¹(i &gt;= 1)<br>2.æ·±åº¦ä¸ºkç¬¬äºŒå‰æ ‘è‡³å¤šæœ‰2<sup>k</sup>-1ä¸ªç»“ç‚¹(k &gt;= 1)<br>3.å¯¹ä»»ä½•ä¸€æ£µäºŒå‰æ ‘Tï¼Œå¦‚æœå…¶ç»ˆç«¯ç»“ç‚¹æ•°ä¸ºn<sub>0</sub>ï¼Œåº¦ä¸º2çš„ç»“ç‚¹æ•°ä¸ºn<sub>2</sub>ï¼Œåˆ™n<sub>0</sub>=n<sub>2</sub>+1<br>4.å…·æœ‰nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ä¸ºparseInt(log<sub>2</sub>n)+1<br>5.å¦‚æœå¯¹ä¸€æ£µæœ‰nä¸ªç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘(å…¶æ·±åº¦ä¸ºparseInt(log<sub>2</sub>n)+1)çš„ç»“ç‚¹æŒ‰å±‚åºç¼–å·(ä»ç¬¬ä¸€å±‚åˆ°ç¬¬parseInt(log<sub>2</sub>n)+1å±‚ï¼Œæ¯å±‚ä»å·¦åˆ°å³)ï¼Œåˆ™å¯¹ä»»ä¸€ç»“ç‚¹i(1 &lt;= i &lt;= n)ï¼Œæœ‰<br>(1)å¦‚æœi=1ï¼Œåˆ™ç»“ç‚¹iæ˜¯äºŒå‰æ ‘çš„æ ¹ï¼Œæ— åŒäº²ï¼›å¦‚æœi &gt; 1ï¼Œåˆ™å…¶åŒäº²parent(i)ç»“ç‚¹æ˜¯parseInt(i/2)<br>(2)å¦‚æœ2<em>i &gt; nï¼Œåˆ™ç»“ç‚¹iæ— å·¦å­©å­(ç»“ç‚¹iä¸ºå¶å­ç»“ç‚¹)ï¼›å¦åˆ™å…¶å·¦å­©å­LCHILD(i)æ˜¯ç»“ç‚¹2</em>i<br>(3)å¦‚æœ2<em>i+1 &gt; nï¼Œåˆ™ç»“ç‚¹iæ— å³å­©å­ï¼›å¦åˆ™å…¶å³å­©å­RCHILD(i)æ˜¯ç»“ç‚¹2</em>i+1<p></p>
<p>ä¸€æ£µæ·±åº¦ä¸ºkä¸”æœ‰2<sup>k</sup>-1ä¸ªç»“ç‚¹çš„äºŒå‰æ ‘ç§°ä¸º<b>æ»¡äºŒå‰æ ‘</b>ã€‚æ·±åº¦ä¸ºkçš„ï¼Œæœ‰nä¸ªç»“ç‚¹çš„äºŒå‰æ ‘ï¼Œå½“ä¸”ä»…å½“å…¶æ¯ä¸€ä¸ªç»“ç‚¹éƒ½ä¸æ·±åº¦ä¸ºkçš„æ»¡äºŒå‰æ ‘ä¸­ç¼–å·ä»1è‡³nçš„ç»“ç‚¹ä¸€ä¸€å¯¹åº”æ—¶ï¼Œç§°ä¹‹ä¸º<b>å®Œå…¨äºŒå‰æ ‘</b>ã€‚<br><img src="https://snakexu.github.io/images/others/tree_1.jpeg"><br>ä¸Šå›¾(a)æ»¡äºŒå‰æ ‘ï¼›(b)å®Œå…¨äºŒå‰æ ‘ï¼›(c)&amp;(d)éå®Œå…¨äºŒå‰æ ‘</p>
<p></p><h4>äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„</h4><br>1.é¡ºåºå­˜å‚¨ç»“æ„<br>æŒ‰ç…§é¡ºåºå­˜å‚¨ç»“æ„çš„å®šä¹‰ï¼Œåœ¨æ­¤çº¦å®šï¼Œç”¨ä¸€ç»„åœ°å€çœ‹è®¸çš„å­˜å‚¨å•å…ƒä¾æ¬¡è‡ªä¸Šè€Œä¸‹ã€è‡ªå·¦è‡³å³å­˜å‚¨å®Œå…¨äºŒå‰æ ‘ä¸Šçš„ç»“ç‚¹å…ƒç´ ï¼Œå³å°†å®Œå…¨äºŒå‰æ ‘ä¸Šç¼–å·ä¸ºiçš„ç»“ç‚¹å…ƒç´ å­˜å‚¨åœ¨ä¸€ç»´æ•°ç»„ä¸­ä¸‹æ ‡ä¸ºi-1çš„åˆ†é‡ä¸­ã€‚å¯¹äºä¸€èˆ¬äºŒå‰æ ‘ï¼Œåˆ™åº”å°†å…¶æ¯ä¸ªç»“ç‚¹ä¸å®Œå…¨äºŒå‰æ ‘ä¸Šçš„ç»“ç‚¹ç›¸å¯¹ç…§ï¼Œå­˜å‚¨åœ¨ä¸€ç»´æ•°ç»„çš„ç›¸åº”åˆ†é‡ä¸­<br>å®Œå…¨äºŒå‰æ ‘ï¼Œå›¾a<br><img src="https://snakexu.github.io/images/others/tree_2.jpeg"><br>äºŒå‰æ ‘ï¼Œå›¾b<br><img src="https://snakexu.github.io/images/others/tree_3.jpeg"><br>ä¸‹å›¾æ˜¯ä¸Šé¢ä¸¤ä¸ªäºŒå‰æ ‘çš„é¡ºåºå­˜å‚¨ï¼Œaæ˜¯å®Œå…¨äºŒå‰æ ‘å›¾açš„é¡ºåºå­˜å‚¨ç»“æ„ï¼Œbæ˜¯äºŒå‰æ ‘å›¾bçš„é¡ºåºå­˜å‚¨ç»“æ„<br><img src="https://snakexu.github.io/images/others/tree_4.jpeg"><br>ç”±æ­¤å¯è§ï¼Œè¿™ç§é¡ºåºå­˜å‚¨ç»“æ„ä»…é€‚ç”¨äºå®Œå…¨äºŒå‰æ ‘ã€‚å› ä¸ºï¼Œåœ¨é†‰è¯çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ·±åº¦ä¸ºkä¸”åªæœ‰kä¸ªç»“ç‚¹çš„å•æ”¯æ ‘(æ ‘ä¸­ä¸å­˜åœ¨åº¦ä¸º2åº¦ç»“ç‚¹)å´éœ€è¦é•¿åº¦ä¸º2<sup>k</sup>-1çš„ä¸€ç»´æ•°ç»„ã€‚<br>2.é“¾å¼å­˜å‚¨ç»“æ„<br>è®¾è®¡ä¸åŒçš„ç»“ç‚¹ç»“æ„å¯æ„æˆä¸åŒå½¢å¼çš„é“¾å¼å­˜å‚¨ç»“æ„ã€‚ç”±äºŒå‰æ ‘çš„å®šä¹‰å¾—çŸ¥ï¼ŒäºŒå‰æ ‘çš„ç»“ç‚¹ç”±ä¸€ä¸ªæ•°æ®å…ƒç´ å’Œåˆ†åˆ«æŒ‡å‘å…¶å·¦å³å­æ ‘çš„ä¸¤ä¸ªåˆ†æ”¯æ„æˆï¼Œåˆ™è¡¨ç¤ºäºŒå‰æ ‘çš„é“¾è¡¨ä¸­çš„ç»“ç‚¹è‡³å°‘åŒ…å«3ä¸ªåŸŸ:æ•°æ®åŸŸå’Œå·¦å³æŒ‡é’ˆåŸŸã€‚æœ‰æ—¶ä¸ºäº†ä¾¿äºæ‰¾åˆ°ç»“ç‚¹çš„åŒäº²ï¼Œåˆ™è¿˜å¯ä»¥åœ¨ç»“ç‚¹çš„ç»“æ„ä¸­å¢åŠ ä¸€ä¸ªæŒ‡å‘å…¶åŒäº²ç»“ç‚¹çš„æŒ‡é’ˆåŸŸã€‚åˆ©ç”¨è¿™ä¸¤ç§ç»“ç‚¹ç»“æ„æ‰€å¾—äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„åˆ†åˆ«ç§°ä¹‹ä¸ºäºŒå‰é“¾è¡¨å’Œä¸‰å‰é“¾è¡¨ã€‚é“¾è¡¨çš„å¤´æŒ‡é’ˆæŒ‡å‘äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ã€‚<br><img src="https://snakexu.github.io/images/others/tree_5.jpeg"><p></p>
<pre>
var BinaryTree =
    (value,parent,left,right) => ({ value, parent, left, right });
var banana = BinaryTree( "banana" );
var apple = banana.left = BinaryTree( "apple", banana );
var cherry = banana.right = BinaryTree( "cherry", banana );
var apricot = apple.right = BinaryTree( "apricot", apple );
var avocado = apricot.right = BinaryTree( "avocado", apricot );
var cantelope = cherry.left = BinaryTree( "cantelope", cherry );
var cucumber = cherry.right = BinaryTree( "cucumber", cherry );
var grape = cucumber.right = BinaryTree( "grape", cucumber );
</pre>
ä¸Šé¢çš„ä»£ç ç”Ÿæˆçš„æ ‘å¦‚ä¸‹å›¾æ‰€ç¤º:
<img src="https://snakexu.github.io/images/others/tree_6.png">
<h3>éå†äºŒå‰æ ‘å’Œçº¿ç´¢äºŒå‰æ ‘</h3>
éå†äºŒå‰æ ‘:å¦‚ä½•æŒ‰ç…§æŸæ¡æœç´¢è·¯å¾„å·¡è®¿æ ‘ä¸­æ¯ä¸ªç»“ç‚¹ï¼Œä½¿å¾—æ¯ä¸ªç»“ç‚¹å‡è¢«è®¿é—®ä¸€æ¬¡ï¼Œè€Œä¸”ä»…è¢«è®¿é—®ä¸€æ¬¡ã€‚"è®¿é—®"çš„å«ä¹‰å¾ˆå¹¿ï¼Œå¯ä»¥æ˜¯å¯¹ç»“ç‚¹ä½œå„ç§å¤„ç†ï¼Œå¦‚è¾“å‡ºç»“ç‚¹çš„ä¿¡æ¯ç­‰ã€‚
é™å®šå…ˆå·¦åå³çš„éå†äºŒå‰æ ‘ï¼Œæœ‰ä¸‰ç§æƒ…å†µâ€”â€”
1.å…ˆåºéå†
è‹¥äºŒå‰æ ‘ä¸ºç©ºï¼Œåˆ™ç©ºæ“ä½œï¼›å¦åˆ™:
(1)è®¿é—®æ ¹ç»“ç‚¹
(2)å…ˆåºéå†å·¦å­æ ‘
(3)å…ˆåºéå†å³å­æ ‘
2.ä¸­åºéå†
è‹¥äºŒå‰æ ‘ä¸ºç©ºï¼Œåˆ™ç©ºæ“ä½œï¼›å¦åˆ™:
(1)ä¸­åºéå†å·¦å­æ ‘
(2)è®¿é—®æ ¹ç»“ç‚¹
(3)ä¸­åºéå†å³å­æ ‘
3.ååºéå†
è‹¥äºŒå‰æ ‘ä¸ºç©ºï¼Œåˆ™ç©ºæ“ä½œï¼›å¦åˆ™:
(1)ååºéå†å·¦å­æ ‘
(2)ååºéå†å³å­æ ‘
(3)è®¿é—®æ ¹ç»“ç‚¹
<pre>
//ä¸­åºéå†
BinaryTree.leftEach = function leftEach(visitFn,node){
    if (node) {
        if (node.left) {
            leftEach( visitFn, node.left );
        }
        visitFn( node );
        if (node.right) {
            leftEach( visitFn, node.right );
        }
    }
};
BinaryTree.leftEach( node => console.log( node.value ), banana );
// apple apricot avocado banana cantelope cherry cucumber grape
// ä»…è®¿é—®æ ¹èŠ‚ç‚¹ä¸º `cherry` çš„å­æ ‘
BinaryTree.leftEach( node => console.log( node.value ), cherry );
// cantelope cherry cucumber grape
//å‰åºéå†
BinaryTree.preorderEach = function preorderEach(visitFn,node){
    visitFn( node );
    if (node.left) {
        preorderEach( visitFn, node.left );
    }
    if (node.right) {
        preorderEach( visitFn, node.right );
    }
};
BinaryTree.preorderEach( node => console.log( node.value ), banana );
//banana apple apricot avocado cherry cantelope cucumber grape
//ååºéå†
BinaryTree.postEach = function postEach(visitFn,node){
    if (node.left) {
        postEach( visitFn, node.left );
    }
    if (node.right) {
        postEach( visitFn, node.right );
    }
    visitFn( node );
};
BinaryTree.postEach( node => console.log( node.value ), banana );
//avocado apricot apple cantelope grape cucumber cherry banana
//å¯¹æ ‘å…ƒç´ è¿›è¡Œå¤„ç†
BinaryTree.map = function map(mapperFn,node){
    if (node) {
        let newNode = mapperFn( node );
        newNode.parent = node.parent;
        newNode.left = node.left ?
            map( mapperFn, node.left ) : undefined;
        newNode.right = node.right ?
            map( mapperFn, node.right ): undefined;
        if (newNode.left) {
            newNode.left.parent = newNode;
        }
        if (newNode.right) {
            newNode.right.parent = newNode;
        }
        return newNode;
    }
};
var BANANA = BinaryTree.map(
    node => BinaryTree( node.value.toUpperCase() ),
    banana
);

BinaryTree.forEach( node => console.log( node.value ), BANANA );
// APPLE APRICOT AVOCADO BANANA CANTELOPE CHERRY CUCUMBER GRAPE
// https://cloud.tencent.com/developer/article/1013613
</pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/29/æ•°æ®ç»“æ„-æ ‘å’ŒäºŒå‰æ ‘/" data-id="ckbm7475g0043b4xqt2jdiss6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ•°æ®ç»“æ„/">æ•°æ®ç»“æ„</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-æ•°æ®ç»“æ„-çº¿æ€§è¡¨" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/24/æ•°æ®ç»“æ„-çº¿æ€§è¡¨/" class="article-date">
  <time datetime="2020-04-24T02:34:18.000Z" itemprop="datePublished">2020-04-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/24/æ•°æ®ç»“æ„-çº¿æ€§è¡¨/">æ•°æ®ç»“æ„-çº¿æ€§è¡¨</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä¸ºäº†å¤ä¹ æ•°æ®ç»“æ„ï¼ŒæŠŠå¤§å­¦æ—¶å€™çš„æ•°æ®ç»“æ„è¯¾æœ¬æ‰¾å‡ºæ¥äº†ï¼Œå¸Œæœ›èƒ½è¾¾åˆ°ç†æƒ³çš„æ•ˆæœå§ã€‚åºŸè¯ä¸å¤šè¯´ï¼Œä»çº¿æ€§ç»“æ„å¼€å§‹ã€‚<br>çº¿æ€§ç»“æ„çš„ç‰¹ç‚¹æ˜¯:åœ¨æ•°æ®å…ƒç´ çš„éç©ºæœ‰é™é›†åˆä¸­ï¼Œ(1)å­˜åœ¨å”¯ä¸€çš„ä¸€ä¸ªè¢«ç§°ä½œâ€œç¬¬ä¸€ä¸ªâ€çš„æ•°æ®å…ƒç´ (2)å­˜åœ¨å”¯ä¸€çš„ä¸€ä¸ªè¢«ç§°ä½œâ€œæœ€åä¸€ä¸ªâ€çš„æ•°æ®å…ƒç´ (3)é™¤ç¬¬ä¸€ä¸ªä¹‹å¤–ï¼Œé›†åˆä¸­çš„æ¯ä¸ªæ•°æ®å…ƒç´ å‡åªæœ‰ä¸€ä¸ªå‰é©±(4)é™¤æœ€åä¸€ä¸ªä¹‹å¤–ï¼Œé›†åˆä¸­æ¯ä¸ªæ•°æ®å…ƒç´ å‡åªæœ‰ä¸€ä¸ªåç»­</p>
<p></p><h2>çº¿æ€§è¡¨</h2><br>çº¿æ€§è¡¨æ˜¯æœ€å¸¸ç”¨ä¸”æœ€ç®€å•çš„ä¸€ç§æ•°æ®ç»“æ„ã€‚ç®€è€Œè¨€ä¹‹ï¼Œä¸€ä¸ªçº¿æ€§è¡¨æ˜¯Nä¸ªæ•°æ®å…ƒç´ çš„æœ‰é™åºåˆ—ã€‚<br>åœ¨ç¨å¤æ‚çš„çº¿æ€§è¡¨ä¸­ï¼Œä¸€ä¸ªæ•°æ®å…ƒç´ å¯ä»¥ç”±è‹¥å¹²ä¸ª<b>æ•°æ®é¡¹</b>ç»„æˆã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¸¸æŠŠæ•°æ®å…ƒç´ ç§°ä¸º<b>è®°å½•</b>ï¼Œå«æœ‰å¸¦æ˜‚è®°å½•çš„çº¿æ€§è¡¨åˆç§°ä¸º<b>æ–‡ä»¶</b>ã€‚<br>çº¿æ€§è¡¨ä¸­çš„æ•°æ®å…ƒç´ å¯ä»¥æ˜¯å„ç§å„æ ·çš„ï¼Œå¯ä»¥æ˜¯26ä¸ªè‹±æ–‡å­—æ¯(A,B,Â·Â·Â·ï¼ŒZ)ï¼Œä¹Ÿå¯ä»¥æ˜¯æ•°å­—(1,2,3,Â·Â·Â·ï¼Œ100)ï¼Œä¹Ÿå¯ä»¥æ˜¯å­¦ç”Ÿæˆç»©çš„è®°å½•<br><!-- |å§“å|å­¦å·|æ€§åˆ«|å¹´é¾„|æ•°å­¦|è¯­æ–‡|
|å¼ ä¸‰|001|ç”·  |15 |98 |95 |
|æå››|002|ç”·  |15 |99 |92 | --><br>  
<table>
	<thead>
		<th>
			</th></thead><td>å§“å</td>
			<td>å­¦å·</td>
			<td>æ€§åˆ«</td>
			<td>å¹´é¾„</td>
			<td>æ•°å­¦</td>
			<td>è¯­æ–‡</td>
		
	
	<tbody>
		<tr>
			<td>å¼ ä¸‰</td>
			<td>001</td>
			<td>ç”·</td>
			<td>15</td>
			<td>98</td>
			<td>95</td>
		</tr>
		<tr>
			<td>æå››</td>
			<td>002</td>
			<td>ç”·</td>
			<td>15</td>
			<td>99</td>
			<td>92</td>
		</tr>
	</tbody>
</table>
<br>ä½†æ˜¯åŒä¸€çº¿æ€§è¡¨ä¸­çš„å…ƒç´ å¿…å®šå…·æœ‰ç›¸åŒç‰¹æ€§ï¼Œå³å±äºåŒä¸€æ•°æ®å¯¹è±¡ï¼Œç›¸é‚»æ•°æ®å…ƒç´ ä¹‹é—´å­˜åœ¨ç€åºå¶å…³ç³»ã€‚è‹¥å°†çº¿æ€§è¡¨è®°ä¸º<br>(a<sub>1</sub>,Â·Â·Â·,a<sub>i-1</sub>,a<sub>i</sub>,a<sub>i+1</sub>,Â·Â·Â·,a<sub>n</sub>)<br>åˆ™è¡¨ä¸­a<sub>i-1</sub>é¢†å…ˆäºa<sub>i</sub>ï¼Œa<sub>i</sub>é¢†å…ˆäºa<sub>i+1</sub>ï¼Œç§°a<sub>i-1</sub>æ˜¯a<sub>i</sub>çš„ç›´æ¥å‰é©±å…ƒç´ ï¼Œa<sub>i+1</sub>æ˜¯a<sub>i</sub>çš„ç›´æ¥åç»§å…ƒç´ ã€‚å½“i=1,2,Â·Â·Â·,n-1æ—¶ï¼Œa<sub>i</sub>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç›´æ¥åç»§ï¼Œå½“i=2,3,Â·Â·Â·,næ—¶ï¼Œa<sub>i</sub>æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªç›´æ¥å‰é©±ã€‚<br>çº¿æ€§è¡¨ä¸­å…ƒç´ çš„ä¸ªæ•°n(n&gt;=0)å®šä¹‰ä¸ºçº¿æ€§è¡¨çš„é•¿åº¦ï¼Œn=0æ—¶ç§°ä¸ºæ§è¡¨ã€‚åœ¨éç©ºè¡¨ä¸­çš„æ¯ä¸ªæ•°æ®å…ƒç´ éƒ½æœ‰ä¸€ä¸ªç¡®å®šçš„ä½ç½®ï¼Œå¦‚a<sub>i</sub>æ˜¯ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ ï¼Œa<sub>n</sub>æ˜¯æœ€åä¸€ä¸ªæ•°æ®å…ƒç´ ï¼Œa<sub>i</sub>æ˜¯ç¬¬iä¸ªæ•°æ®å…ƒç´ ï¼Œç§°iä¸ºæ•°æ®å…ƒç´ a<sub>i</sub>åœ¨çº¿æ€§è¡¨ä¸­çš„ä½åºã€‚<br>çº¿æ€§è¡¨æ˜¯ä¸€ä¸ªç›¸å½“çµæ´»çš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„é•¿åº¦å¯æ ¹æ®éœ€è¦å¢é•¿æˆ–ç¼©çŸ­ï¼Œå³å¯¹çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ ä¸ä»…å¯ä»¥è¿›è¡Œè®¿é—®ï¼Œè¿˜å¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤ç­‰ã€‚<p></p>
<p></p><h3>çº¿æ€§è¡¨çš„é¡ºåºè¡¨ç¤ºå’Œå®ç°</h3><br>çº¿æ€§è¡¨çš„é¡ºåºè¡¨ç¤ºæŒ‡çš„æ˜¯ç”¨ä¸€ç»„è¿ç»­çš„å­˜å‚¨å•å…ƒä¾æ¬¡å­˜å‚¨çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ ã€‚<br>å‡è®¾çº¿æ€§è¡¨çš„æ¯ä¸ªå…ƒç´ éœ€å ç”¨lä¸ªå­˜å‚¨å•å…ƒï¼Œå¹¶ä»¥æ‰€å çš„ç¬¬ä¸€ä¸ªå•å…ƒçš„å­˜å‚¨åœ°å€ä½œä¸ºæ•°æ®å…ƒç´ çš„å­˜å‚¨ä½ç½®ã€‚åˆ™çº¿æ€§è¡¨ä¸­ç¬¬i+1ä¸ªæ•°æ®å…ƒç´ çš„å­˜å‚¨ä½ç½®LOC(a<sub>i+1</sub>)å’Œç¬¬iä¸ªæ•°æ®å…ƒç´ çš„å­˜å‚¨ä½ç½®LOC(a<sub>i</sub>)ä¹‹é—´æ»¡è¶³ä¸‹åˆ—å…³ç³»:<br>LOC(a<sub>i+1</sub>) = LOC(a<sub>i</sub>) + l<br>ä¸€èˆ¬æ¥è¯´ï¼Œçº¿æ€§è¡¨çš„ç¬¬iä¸ªæ•°æ®å…ƒç´ a<sub>i</sub>çš„å­˜å‚¨ä½ç½®ä¸º<br>LOC(a<sub>i</sub>) = LOC(a<sub>1</sub>) + (i-1) * l<br>ä¸Šé¢LOC(a<sub>1</sub>)æ˜¯çº¿æ€§è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ a<sub>1</sub>çš„å­˜å‚¨ä½ç½®ï¼Œé€šå¸¸ç§°ä½œçº¿æ€§è¡¨çš„èµ·å§‹ä½ç½®æˆ–è€…åŸºåœ°å€<br>çº¿æ€§è¡¨çš„è¿™ç§æœºå†…è¡¨ç¤ºç§°ä½œçº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„æˆ–é¡ºåºæ˜ åƒï¼Œé€šå¸¸ï¼Œç§°è¿™ç§å­˜å‚¨ç»“æ„çš„çº¿æ€§è¡¨ä¸ºé¡ºåºè¡¨ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯ï¼Œä¸ºè¡¨ä¸­ç›¸é‚»çš„å…ƒç´ a<sub>i</sub>å’Œa<sub>i+1</sub>èµ‹ä»¥ç›¸é‚»çš„å­˜å‚¨ä½ç½®LOC(a<sub>i</sub>)å’ŒLOC(a<sub>i+1</sub>)ã€‚æ¢å¥è¯è¯´ï¼Œä»¥å…ƒç´ åœ¨è®¡ç®—æœºå†…â€œç‰©ç†ä½ç½®ç›¸é‚»â€æ¥è¡¨ç¤ºçº¿æ€§è¡¨ä¸­æ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»ã€‚æ¯ä¸€ä¸ªæ•°æ®å…ƒç´ çš„å­˜å‚¨ä½ç½®éƒ½å’Œçº¿æ€§è¡¨çš„èµ·å§‹ä½ç½®ç›¸å·®ä¸€ä¸ªå’Œæ•°æ®å…ƒç´ åœ¨çº¿æ€§è¡¨ä¸­çš„ä½åºæˆæ­£æ¯”çš„å¸¸æ•°ã€‚ç”±æ­¤ï¼Œåªè¦ç¡®å®šäº†å­˜å‚¨çº¿æ€§è¡¨çš„èµ·å§‹ä½ç½®ï¼Œçº¿æ€§è¡¨ä¸­ä»»ä¸€æ•°æ®å…ƒç´ éƒ½å¯éšæœºå­˜å–ï¼Œæ‰€ä»¥çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„æ˜¯ä¸€ç§éšæœºå­˜å–çš„å­˜å‚¨ç»“æ„ã€‚<p></p>
<p></p><h3>çº¿æ€§è¡¨çš„é“¾å¼è¡¨ç¤ºå’Œå®ç°</h3><br>çº¿æ€§è¡¨çš„é¡ºåºå­˜å‚¨ç»“æ„çš„ç‰¹ç‚¹æ˜¯é€»è¾‘å…³ç³»ä¸Šç›¸é‚»çš„ä¸¤ä¸ªå…ƒç´ åœ¨ç‰©ç†ä½ç½®ä¸Šä¹Ÿç›¸é‚»ï¼Œå› æ­¤å¯ä»¥éšæœºå­˜å–è¡¨ä¸­ä»»ä¸€å…ƒç´ ï¼Œå®ƒçš„å­˜å‚¨ä½ç½®å¯ç”¨ä¸€ä¸ªç®€å•ã€ç›´è§‚çš„å…¬å¼æ¥è¡¨ç¤ºã€‚ç„¶è€Œï¼Œä»å¦ä¸€æ–¹é¢æ¥è®²ï¼Œè¿™ä¸ªç‰¹ç‚¹ä¹Ÿé“¸æˆäº†è¿™ç§å­˜å‚¨ç»“æ„çš„å¼±ç‚¹ï¼šåœ¨ä½œæ’å…¥æˆ–åˆ é™¤æ“ä½œæ—¶ï¼Œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†è®¨è®ºçº¿æ€§è¡¨çš„å¦ä¸€ç§è¡¨ç¤ºæ–¹æ³•â€”â€”é“¾å¼å­˜å‚¨ç»“æ„ï¼Œç”±äºå®ƒä¸è¦æ±‚é€»è¾‘ä¸Šç›¸é‚»çš„å…ƒç´ åœ¨ç‰©ç†ä½ç½®ä¸Šä¹Ÿç›¸é‚»ï¼Œå› æ­¤å®ƒæ²¡æœ‰é¡ºåºå­˜å‚¨æ‰€å…·æœ‰çš„å¼±ç‚¹ï¼Œä½†åŒæ—¶ä¹Ÿå¤±å»äº†é¡ºåºè¡¨å¯éšæœºå­˜å–çš„ä¼˜ç‚¹ã€‚<p></p>
<p></p><h4>çº¿æ€§é“¾è¡¨</h4><br>çº¿æ€§è¡¨çš„é“¾å¼å­˜å‚¨ç»“æ„çš„ç‰¹ç‚¹æ˜¯ç”¨ä¸€ç»„ä»»æ„çš„å­˜å‚¨å•å…ƒå­˜å‚¨çº¿æ€§è¡¨çš„æ•°æ®å…ƒç´ (è¿™ç»„å­˜å‚¨å•å…ƒå¯ä»¥æ˜¯è¿ç»­çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸è¿ç»­çš„)ã€‚å› æ­¤ï¼Œä¸ºäº†è¡¨ç¤ºæ¯ä¸ªæ•°æ®å…ƒç´ a<sub>i</sub>ä¸å…¶ç›´æ¥åç»§æ•°æ®å…ƒç´ a<sub>i+1</sub>ä¹‹é—´çš„é€»è¾‘å…³ç³»ï¼Œå¯¹æ•°æ®å…ƒç´ a<sub>i</sub>æ¥è¯´é™¤äº†å­˜å‚¨å…¶æœ¬èº«çš„ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜éœ€è¦å­˜å‚¨ä¸€ä¸ªæŒ‡ç¤ºå…¶ç›´æ¥åç»§çš„ä¿¡æ¯(å³ç›´æ¥åç»§çš„å­˜å‚¨ä½ç½®)ã€‚è¿™ä¸¤éƒ¨åˆ†ä¿¡æ¯ç»„æˆæ•°æ®å…ƒç´ a<sub>i</sub>çš„å­˜å‚¨æ˜ åƒï¼Œç§°ä¸º<b>ç»“ç‚¹</b>ã€‚å®ƒåŒ…æ‹¬è¿ä¸ªåŸŸï¼šå…¶ä¸­å­˜å‚¨æ•°æ®å…ƒç´ ä¿¡æ¯çš„åŸŸç§°ä¸º<b>æ•°æ®åŸŸ</b>ï¼Œå­˜å‚¨ç›´æ¥åç»§å­˜å‚¨ä½ç½®çš„åŸŸç§°ä¸º<b>æŒ‡é’ˆåŸŸ</b>ã€‚æŒ‡é’ˆåŸŸä¸­å­˜å‚¨çš„ä¿¡æ¯ç§°ä½œ<b>æŒ‡é’ˆ</b>æˆ–<b>é“¾</b>ã€‚nä¸ªèŠ‚ç‚¹(a<sub>i</sub>(1&lt;=1&lt;=n)çš„å­˜å‚¨æ˜ åƒ)é“¾ç»“æˆä¸€ä¸ª<b>é“¾è¡¨</b>ï¼Œå³ä¸ºçº¿æ€§è¡¨<br>(a<sub>1</sub>,a<sub>2</sub>,â€¦,a<sub>n</sub>)<br>çš„é“¾å¼å­˜å‚¨ç»“æ„ã€‚åˆç”±äºæ­¤é“¾è¡¨çš„æ¯ä¸ªç»“ç‚¹ä¸­åªåŒ…å«ä¸€ä¸ªæŒ‡é’ˆåŸŸï¼Œæ•…åˆç§°<b>çº¿æ€§é“¾è¡¨</b>æˆ–<b>å•é“¾è¡¨</b>ã€‚<br>ä¾‹å¦‚ï¼š<br>(ZHAO,QIAN,SUN,LI,ZHOU,WU,ZHENG,WANG)<br>çš„çº¿æ€§é“¾è¡¨å­˜å‚¨ç»“æ„ï¼Œæ•´ä¸ªé“¾è¡¨çš„å­˜å–å¿…é¡»ä»<b>å¤´æŒ‡é’ˆ</b>å¼€å§‹è¿›è¡Œï¼Œå¤´æŒ‡é’ˆæŒ‡ç¤ºé“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªç»“ç‚¹(å³ç¬¬ä¸€ä¸ªæ•°æ®å…ƒç´ çš„å­˜å‚¨æ˜ åƒ)çš„å­˜å‚¨ä½ç½®ã€‚åŒæ—¶ï¼Œç”±äºæœ€åä¸€ä¸ªæ•°æ®å…ƒç´ æ²¡æœ‰ç›´æ¥åç»§ï¼Œåˆ™çº¿æ€§é“¾è¡¨ä¸­æœ€åä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆä¸ºâ€ç©ºâ€(NULL)ã€‚<br> 
<table>
	<thead>
		<th>
			</th></thead><td></td>
			<td>å­˜å‚¨åœ°å€</td>
			<td>æ•°æ®åŸŸ</td>
			<td>æŒ‡é’ˆåŸŸ</td>
		
	
	<tbody>
		<tr>
			<td rowspan="8" align="center">å¤´æŒ‡é’ˆH<br>31</td>
			<td>1</td>
			<td>LI</td>
			<td>43</td>
		</tr>
		<tr>
			<td>7</td>
			<td>QIAN</td>
			<td>13</td>
		</tr>
		<tr>
			<td>13</td>
			<td>SUN</td>
			<td>1</td>
		</tr>
		<tr>
			<td>19</td>
			<td>WANG</td>
			<td>NULL</td>
		</tr>
		<tr>
			<td>25</td>
			<td>WU</td>
			<td>37</td>
		</tr>
		<tr>
			<td>31</td>
			<td>ZHAO</td>
			<td>7</td>
		</tr>
		<tr>
			<td>37</td>
			<td>ZHENG</td>
			<td>19</td>
		</tr>
		<tr>
			<td>43</td>
			<td>ZHOU</td>
			<td>25</td>
		</tr>
	</tbody>
</table>
<br>ç”¨çº¿æ€§é“¾è¡¨è¡¨ç¤ºçº¿æ€§è¡¨æ—¶ï¼Œæ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»æ˜¯ç”±ç»“ç‚¹ä¸­çš„æŒ‡é’ˆæŒ‡ç¤ºçš„ã€‚æ¢å¥è¯è¯´ï¼ŒæŒ‡é’ˆä¸ºæ•°æ®å…ƒç´ ä¹‹é—´çš„é€»è¾‘å…³ç³»çš„æ˜ åƒï¼Œåˆ™é€»è¾‘ä¸Šç›¸é‚»çš„ä¸¤ä¸ªæ•°æ®å…ƒç´ å…¶å­˜å‚¨çš„ç‰©ç†ä½ç½®ä¸è¦æ±‚ç´§é‚»ï¼Œç”±æ­¤ï¼Œè¿™ç§å­˜å‚¨ç»“æ„ä¸ºéé¡ºåºæ˜ åƒæˆ–é“¾å¼æ˜ åƒã€‚<br>å‡è®¾Læ˜¯LinkListå‹çš„å˜é‡ï¼Œåˆ™Lä¸ºå•é“¾è¡¨çš„å¤´æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘è¡¨ä¸­ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚è‹¥Lä¸ºâ€ç©ºâ€(L=NULL)ï¼Œåˆ™æ‰€è¡¨ç¤ºçš„çº¿æ€§è¡¨ä¸ºâ€ç©ºâ€è¡¨ï¼Œå…¶é•¿åº¦ä¸ºâ€é›¶â€ã€‚æœ‰æ—¶æˆ‘ä»¬åœ¨å•é“¾è¡¨çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ä¹‹å‰é™„è®¾ä¸€ä¸ªç»“ç‚¹ï¼Œç§°ä¹‹ä¸º<b>å¤´ç»“ç‚¹</b>ã€‚å¤´ç»“ç‚¹çš„æ•°æ®åŸŸå¯ä»¥ä¸å­˜å‚¨ä»»ä½•ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¦‚çº¿æ€§è¡¨çš„é•¿åº¦ç­‰ç±»çš„é™„åŠ ä¿¡æ¯ï¼Œå¤´ç»“ç‚¹çš„æŒ‡é’ˆåŸŸå­˜å‚¨æŒ‡å‘ç¬¬ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆ(å³ç¬¬ä¸€ä¸ªå…ƒç´ ç»“ç‚¹çš„å­˜å‚¨ä½ç½®)ã€‚<br>åœ¨å•é“¾è¡¨ä¸­ï¼Œä»»ä½•ä¸¤ä¸ªå…ƒç´ çš„å­˜å‚¨ä½ç½®ä¹‹é—´æ²¡æœ‰å›ºå®šçš„è”ç³»ã€‚ç„¶è€Œï¼Œæ¯ä¸ªå…ƒç´ çš„å­˜å‚¨ä½ç½®éƒ½åŒ…å«åœ¨å…¶ç›´æ¥å‰é©±ç»“ç‚¹çš„ä¿¡æ¯ä¹‹ä¸­ã€‚å‡è®¾pæ˜¯æŒ‡å‘çº¿æ€§è¡¨ä¸­ç¬¬iä¸ªæ•°æ®å…ƒç´ (ç»“ç‚¹a<sub>i</sub>)çš„æŒ‡é’ˆï¼Œåˆ™p-&gt;nextæ˜¯æŒ‡å‘ç¬¬i+1ä¸ªæ•°æ®å…ƒç´ (ç»“ç‚¹a<sub>i+1</sub>)çš„æŒ‡é’ˆã€‚æ¢å¥è¯è¯´ï¼Œè‹¥p-&gt;data=a<sub>i</sub>ï¼Œåˆ™p-&gt;next-&gt;data=a<sub>i+1</sub>ã€‚ç”±æ­¤ï¼Œåœ¨å•é“¾è¡¨ä¸­ï¼Œå–å¾—ç¬¬iä¸ªæ•°æ®å…ƒç´ å¿…é¡»ä»å¤´æŒ‡é’ˆå‡ºå‘å¯»æ‰¾ï¼Œå› æ­¤ï¼Œå•é“¾è¡¨æ˜¯ééšæœºå­˜å–çš„å­˜å‚¨ç»“æ„ã€‚<p></p>
<pre>
/*
* å•å‘é“¾è¡¨çš„åŸºæœ¬æ“ä½œ å¢ã€åˆ ã€æŸ¥
* param data ç»“ç‚¹çš„å€¼
* param index 
* reverse é€†è½¬é“¾è¡¨
*/
class Node{
    constructor(data,next) {
        this.data = data
        this.next = next
    }
}
class LinkList{
    constructor(){
        this.head = new Node(0,null);//å¤´ç»“ç‚¹
        this.length = 0;
    }
    createNode(data,next) {
        return new Node(data,next);
    }
    insertNode(index,data){
        if(index < 1) return new Error('è¯·æ­£ç¡®å¡«å†™è¦æ’å…¥æ•°æ®çš„ä½ç½®')
        let j = 1;
        let p = this.head;
        while(p.next && j < index){
            j++
            p = p.next
        }
        let newNode = this.createNode(data,p.next)
        p.next = newNode
        this.length++
    }
    deleteNode(index){
        if(typeof index !== 'number' || index < 0){
            return new Error('è¯·æ­£ç¡®é€‰æ‹©è¦åˆ é™¤çš„é¡¹')
        }
        if(this.length === 0){
            return new Error('ç»“ç‚¹ä¸å­˜åœ¨')
        }
        let p = this.head,j=1;
        while(p.next && j < index){
            j++
            p = p.next
        }
        let item = p.next
        p.next = item.next
        item = null
        this.length -= 1;
    }
    find(index){
        let p = this.head,j=1;
        while(p.next && j < index){
            j++
            p = p.next
        }
        return p.next
    }
    getList(){
        let arr = []
        let p = this.head,i=0
        while(p.next){
            p=p.next
            arr[i++] = p.data
        }
        return arr
    }
    //getLength(){
        //return this.length
    //}
    reverse(){
        let p = this.head,s = p.next,t;
        while(s.next){
            t = s.next;
            s.next = p;
            p = s;
            s = t;
        }
        s.next = p;
        this.head.next.next = null
        this.head.next = s
    }
}
let list = new LinkList();
list.insertNode(1,'a')
list.insertNode(2,'b')
list.insertNode(3,'c')
list.deleteNode(1)
console.log(list.find(1))
console.log(list.getList())
console.log(list.getLength())
</pre>
<h3>å¾ªç¯é“¾è¡¨</h3>
å¾ªç¯é“¾è¡¨æ˜¯å¦ä¸€ç§å½¢å¼çš„é“¾å¼å­˜å‚¨ç»“æ„ã€‚å®ƒçš„ç‰¹ç‚¹æ˜¯è¡¨ä¸­æœ€åä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆæŒ‡å‘å¤´ç»“ç‚¹ï¼Œæ•´ä¸ªé“¾è¡¨å½¢æˆä¸€ä¸ªç¯ã€‚ç”±æ­¤ï¼Œä»è¡¨ä¸­ä»»ä¸€ç»“ç‚¹å‡ºå‘å‡å¯æ‰¾åˆ°è¡¨ä¸­å…¶å®ƒç»“ç‚¹ã€‚
å¾ªç¯é“¾è¡¨çš„æ“ä½œå’Œçº¿æ€§é“¾è¡¨åŸºæœ¬ä¸€è‡´ï¼Œå·®åˆ«ä»…åœ¨äºç®—æ³•ä¸­çš„å¾ªç¯æ¡ä»¶æ˜¯ä¸æ˜¯pæˆ–p->nextæ˜¯å¦ä¸ºç©ºï¼Œè€Œæ˜¯å®ƒä»¬æ˜¯å¦ç­‰äºå¤´æŒ‡é’ˆã€‚ä½†æœ‰çš„æ—¶å€™ï¼Œè‹¥åœ¨å¾ªç¯é“¾è¡¨ä¸­è®¾ç«‹å°¾æŒ‡é’ˆè€Œä¸è®¾ç«‹å¤´æŒ‡é’ˆï¼Œå¯ä½¿æŸäº›æ“ä½œç®€åŒ–ã€‚ä¾‹å¦‚å°†ä¸¤ä¸ªçº¿æ€§è¡¨åˆå¹¶æˆä¸€ä¸ªè¡¨æ—¶ï¼Œä»…éœ€å°†ä¸€ä¸ªè¡¨çš„è¡¨å°¾å’Œå¦ä¸€ä¸ªè¡¨çš„è¡¨å¤´ç›¸æ¥ã€‚
<h3>åŒå‘é“¾è¡¨</h3>
åŒå‘é“¾è¡¨çš„ç»“ç‚¹ä¸­æœ‰ä¸¤ä¸ªæŒ‡é’ˆåŸŸï¼Œå…¶ä¸€æŒ‡å‘ç›´æ¥åç»§ï¼Œå¦ä¸€æŒ‡å‘ç›´æ¥å‰è¶‹ã€‚å’Œå•é“¾çš„å¾ªç¯é“¾è¡¨ç±»ä¼¼ï¼ŒåŒå‘é“¾è¡¨ä¹Ÿå¯ä»¥æœ‰å¾ªç¯é“¾è¡¨ã€‚
<img src="https://snakexu.github.io/images/others/linear_1.jpeg">
ä¸Šå›¾ä¸­(c)ï¼Œé“¾è¡¨ä¸­å­˜æœ‰ä¸¤ä¸ªç¯ï¼Œ(b)æ‰€ç¤ºä¸ºåªæœ‰ä¸€ä¸ªè¡¨å¤´ç»“ç‚¹çš„ç©ºè¡¨ã€‚åœ¨åŒå‘é“¾è¡¨ä¸­ï¼Œè‹¥dä¸ºæŒ‡å‘è¡¨ä¸­æŸä¸€ç»“ç‚¹çš„æŒ‡é’ˆ(å³dä¸ºDuLinkListå‹å˜é‡)ï¼Œåˆ™æ˜¾ç„¶æœ‰
d -> next -> prior = d -> prior -> next = d
è¿™ä¸ªè¡¨ç¤ºå¼æ°å½“åœ°ååº”äº†è¿™ç§ç»“æ„çš„ç‰¹æ€§ã€‚
åœ¨åŒå‘é“¾è¡¨ä¸­ï¼Œæœ‰äº›æ“ä½œå¦‚:ListLengthã€GetElemå’ŒLocateElemç­‰ä»…éœ€æ¶‰åŠä¸€ä¸ªæ–¹å‘çš„æŒ‡é’ˆï¼Œåˆ™å®ƒä»¬çš„ç®—æ³•æè¿°å’Œçº¿æ€§é“¾è¡¨çš„æ“ä½œç›¸åŒï¼Œä½†åœ¨æ’å…¥ã€åˆ é™¤æ—¶æœ‰å¾ˆå¤§çš„ä¸åŒï¼Œåœ¨åŒå‘é“¾è¡¨ä¸­éœ€åŒæ—¶ä¿®æ”¹ä¸¤ä¸ªæ–¹å‘ä¸Šçš„æŒ‡é’ˆã€‚
<pre>
/*
* åŒå‘é“¾è¡¨çš„åŸºæœ¬æ“ä½œ
* param data ç»“ç‚¹çš„å€¼
* param index ç»“ç‚¹ç´¢å¼•
* param prev å‰é©±æŒ‡é’ˆ
* param next åç»§æŒ‡é’ˆ
*/
class Node{
    constructor(data,prev,next){
        this.data = data;
        this.next = next;
        this.prev = prev
    }
}
class DoubleList{
    //
}
</pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/24/æ•°æ®ç»“æ„-çº¿æ€§è¡¨/" data-id="ckbm7475h0045b4xq6kwdx83o" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/æ•°æ®ç»“æ„/">æ•°æ®ç»“æ„</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ç½‘æ˜“å¾®ä¸“ä¸š-node-1-2-3-ES6-å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/04/23/ç½‘æ˜“å¾®ä¸“ä¸š-node-1-2-3-ES6-å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ/" class="article-date">
  <time datetime="2020-04-23T03:50:52.000Z" itemprop="datePublished">2020-04-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/04/23/ç½‘æ˜“å¾®ä¸“ä¸š-node-1-2-3-ES6-å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ/">ç½‘æ˜“å¾®ä¸“ä¸š-node-1.2.3-ES6+å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>1.å¼‚æ­¥ç¼–ç¨‹ä¼˜åŠ¿<br><img src="https://snakexu.github.io/images/wangyi/node/1.2.3_1.png"><br>2.å¼‚æ­¥ç¼–ç¨‹éš¾ç‚¹<br>2-1.å¼‚å¸¸å¤„ç†<br>Â·è¿‡å»å¼‚å¸¸å¤„ç†</p>
<p><pre><br>try{<br>    JSON.parse(json);<br>}cache(e){<br>    //TODO<br>}<br></pre><br>Â·è¿™å¯¹äºå¼‚æ­¥ç¼–ç¨‹è€Œè¨€å¹¶ä¸ä¸€å®šé€‚ç”¨<br>Â·åªèƒ½æ•è·å½“æ¬¡äº‹ä»¶å¾ªç¯å†…çš„å¼‚å¸¸ï¼Œå¯¹â€™callbackâ€™æ‰§è¡Œæ—¶æŠ›å‡ºçš„å¼‚å¸¸è¡Œä¸ºå°†æ— èƒ½ä¸ºåŠ›</p>
<p><pre><br>try{<br>    async(callback);<br>}cache(e){<br>    //TODO<br>}<br></pre><br>Â·nodeåœ¨å¤„ç†å¼‚å¸¸å½¢æˆäº†ä¸€ç§çº¦å®šï¼Œå°†å¼‚å¸¸ä½œä¸ºå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å›<br>Â·å¿…é¡»æ‰§è¡Œè°ƒç”¨è€…ä¼ å…¥çš„å›è°ƒå‡½æ•°<br>Â·æ­£ç¡®ä¼ é€’å¼‚å¸¸ä¾›è°ƒç”¨è€…åˆ¤æ–­<br>Â·å¦ä¸€ä¸ªå®¹æ˜“çŠ¯çš„é”™è¯¯æ˜¯å¯¹ç”¨æˆ·ä¼ é€’çš„å›è°ƒå‡½æ•°è¿›è¡Œå¼‚å¸¸æ•è·<br>é”™è¯¯ç¤ºèŒƒ:</p>
<p><pre><br>try{<br>    req.body = JSON.parse(buf,options,reviver);<br>    callback();<br>}cache(err){<br>    err.body = buf;<br>    err.status = 400;<br>    callback(400);<br>}<br></pre><br>2-2.å‡½æ•°åµŒå¥—è¿‡æ·±<br><img src="https://snakexu.github.io/images/wangyi/node/1.2.3_2.png"><br>2-3.å…¶å®ƒéš¾ç‚¹<br>Â·å¤šçº¿ç¨‹ç¼–ç¨‹<br><img src="https://snakexu.github.io/images/wangyi/node/1.2.3_3.png"><br>Â·å¼‚æ­¥è½¬åŒæ­¥<br><img src="https://snakexu.github.io/images/wangyi/node/1.2.3_4.png"><br>3.å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ<br>è§£å†³æ–¹æ¡ˆ:<br>Â·äº‹ä»¶å‘å¸ƒ/è®¢é˜…æ¨¡å¼<br>Â·asyncæµç¨‹æ§åˆ¶<br>Â·promiseæ¨¡å¼<br>Â·â€¦<br>å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸‰ä¸ªæ–‡ä»¶dev.jsonã€prod.jsonã€test.jsonï¼Œç›¸åº”çš„å†…å®¹åˆ†åˆ«ä¸º{â€œdevâ€:â€devdevâ€}ã€{â€œprodâ€:â€prodprodâ€}ã€{â€œtestâ€:â€testtestâ€}ï¼Œå¹¶ä¸”è¿™ä¸‰ä¸ªæ–‡ä»¶å’Œä¸‹é¢çš„ä»£ç æ–‡ä»¶åœ¨åŒä¸€ä¸ªè·Ÿç›®å½•ä¸‹<br>index.js</p>
<p><pre><br>const fs = require(â€˜fsâ€™);<br>let files = [â€˜/dev.jsonâ€™, â€˜/test.jsonâ€™, â€˜/prod.jsonâ€™];<br>fs.readFile(<strong>dirname + files[0], â€˜utf8â€™, (err, data) =&gt; {<br>    let result = [];<br>    if (err) console.log(â€˜Error: â€˜ + err);<br>    result.push(data);<br>    fs.readFile(</strong>dirname + files[1], â€˜utf8â€™, (err, data) =&gt; {<br>        if (err) console.log(â€˜Error: â€˜ + err);<br>        result.push(data);<br>        fs.readFile(__dirname + files[2], â€˜utf8â€™, (err, data) =&gt; {<br>            if (err) console.log(â€œError: â€œ + err);<br>            result.push(data);<br>            console.log(result);<br>        });<br>    });<br>});<br></pre><br>æ‰§è¡Œä¸Šé¢index.jsä»£ç ï¼Œå¾—åˆ°å¦‚ä¸‹ç»“æœ<br><img src="https://snakexu.github.io/images/wangyi/node/1.2.3_5.png"><br>ä½†æ˜¯index.jsçš„ä»£ç å·²ç»çœ‹åˆ°äº†å›è°ƒåœ°ç‹±çš„è¶‹åŠ¿ï¼Œäºæ˜¯æˆ‘ä»¬æƒ³ç”¨å‘å¸ƒ/è®¢é˜…æ¨¡å¼æ¥ä½¿ä»£ç çœ‹èµ·æ¥æ›´å®¹æ˜“ç†è§£ã€‚<br>é¦–å…ˆå°è£…ä¸€ä¸ªm.js</p>
<p><pre><br>const fs = require(â€˜fsâ€™);<br>module.exports = function(filename,cb){<br>    fs.readFile(__dirname + filename, â€˜utf8â€™, (err, data) =&gt; {<br>        cb(err,data)<br>    });<br>}<br></pre><br>index1.js</p>
<p><pre><br>const fn = require(â€˜./mâ€™)//å¼•å…¥m.js<br>const events = require(â€˜eventsâ€™);<br>let files = [â€˜/dev.jsonâ€™, â€˜/test.jsonâ€™, â€˜/prod.jsonâ€™];<br>const emitter = new events.EventEmitter();<br>var done = after(times,cb,(res)=&gt;{<br>    console.log(res)<br>})<br>emitter.on(â€˜doneâ€™,done);<br>function after(times,cb){<br>    let count = 0, result = [];<br>    return function(data){<br>        result.push(data);<br>        count++;<br>        if(count === times){<br>            cb(result)<br>        }<br>    }<br>}<br>files.forEach((filename)=&gt;{<br>    fn(filename,(err,data)=&gt;{<br>        //if(err) TODO<br>        emitter.emit(â€˜doneâ€™,data)<br>    })<br>})<br></pre><br>å¯ä»¥çœ‹åˆ°index1.jsçš„æ‰§è¡Œç»“æœå’Œä¸Šé¢æˆ‘ä»¬ç”¨å›è°ƒå†™çš„ä»£ç æ‰§è¡Œç»“æœè¿˜æ˜¯ä¸€æ ·çš„ï¼Œè¯´æ˜ä»£ç æ²¡æœ‰é—®é¢˜<br><img src="https://snakexu.github.io/images/wangyi/node/1.2.3_6.png"><br>å¤šæ‰§è¡Œå‡ æ¬¡ä»£ç ï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ–‡ä»¶è¯»å–é¡ºåºæ˜¯ä¸ä¸€æ ·çš„<br><img src="https://snakexu.github.io/images/wangyi/node/1.2.3_7.png"><br>emitter.oné»˜è®¤åœ¨nodeä¸­åªèƒ½ç»‘å®š10æ¬¡ï¼Œè¶…è¿‡10æ¬¡å°±ä¼šæŠ¥é”™ï¼Œè®¤ä¸ºå†…å­˜æ³„æ¼ï¼Œå¯ä»¥é€šè¿‡emitter.setMaxListeners(100)è¿™æ ·ç»‘å®šä¿®æ”¹æœ€å¤§å€¼<br>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨é¡¹ç›®ä¸­å®‰è£…asyncåº“æ¥å®ç°éœ€æ±‚ã€‚asyncåº“å®‰è£…ä¹‹åï¼Œæ–°å»ºä¸€ä¸ªindex2.js</p>
<p><pre><br>const fn = require(â€˜./mâ€™)<br>const async = require(â€˜asyncâ€™)<br>let files = [â€˜/dev.jsonâ€™, â€˜/test.jsonâ€™, â€˜/prod.jsonâ€™];<br>async.waterfall([<br>    (cb) =&gt; {<br>        fn(files[0], (err, data) =&gt; {<br>            cb(err, data);<br>        });<br>    },<br>    (data1, cb) =&gt; {<br>        fn(files[1], (err, data) =&gt; {<br>            cb(err, data1, data)<br>        });<br>    },<br>    (data1, data2, cb) =&gt; {<br>        fn(files[2], (err, data) =&gt; {<br>            cb(err, data1, data2, data);<br>        });<br>    }<br>], (err, data1, data2, data3) =&gt; {<br>    if (err) console.log(err);<br>    let result = [data1, data2, data3];<br>    console.log(result);<br>});<br></pre><br>æ‰§è¡Œindex2.jsä¼šæŒ‰ç…§æˆ‘ä»¬å†™çš„å‡½æ•°é¡ºåºå»è¯»å–æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´è¯»å–æ–‡ä»¶çš„é¡ºåºæ˜¯ç¡®å®šçš„ï¼Œå¦‚æœä¸­é—´å“ªä¸ªæ–‡ä»¶è¯»å–å‡ºé”™ï¼Œåé¢å°±ä¸ä¼šå†æ‰§è¡Œäº†(ä¸ä¼šæ‰§è¡Œåé¢çš„è¯»å–ï¼Œä½†æ˜¯æ•´ä¸ªå‡½æ•°è¿˜æ˜¯ä¼šæ‰§è¡Œ)<br><img src="https://snakexu.github.io/images/wangyi/node/1.2.3_8.png"><br>å¦å¤–å°±æ˜¯ä½¿ç”¨Promiseæ¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚<br>index3.js</p>
<p><pre><br>const fn = require(â€˜./mâ€™);<br>let files = [â€˜/dev.jsonâ€™, â€˜/test.jsonâ€™, â€˜/prod.jsonâ€™];<br>function toPromiseStyle(fn) {<br>    return (â€¦args) =&gt; {<br>        return new Promise((resolve, reject) =&gt; {<br>            fn(â€¦args, (err, data) =&gt; {<br>                if (err) reject(err);<br>                resolve(data);<br>            });<br>        });<br>    }<br>}<br>let op = toPromiseStyle(fn);<br>let result = [];<br>op(files[0])<br>    .then((data) =&gt; {<br>        result.push(data);<br>        return op(files[1]);<br>    })<br>    .then((data) =&gt; {<br>        result.push(data);<br>        return op(files[2]);<br>    })<br>    .then((data) =&gt; {<br>        result.push(data);<br>        console.log(relust);<br>    }).catch((err) =&gt; {<br>        console.log(err);<br>        console.log(result);<br>    });<br>function* getResult() {<br>    let res;<br>    try {<br>        res = yield op(files[0]);<br>        res = yield op(files[1]);<br>        res = yield op(files[2]);<br>        return res;<br>    } catch (error) {<br>        return console.log(err);<br>    }<br>}<br>async function getResult1() {<br>    let res;<br>    try {<br>        res = await op(files[0]);<br>        res = await op(files[1]);<br>        res = await op(files[2]);<br>        return res;<br>    } catch (error) {<br>        return console.log(err);<br>    }<br>}<br></pre><br>promiseè¿™ä¸ªå’Œasyncç›¸åŒä¹‹å¤„å°±æ˜¯ä¼šæŒ‰ç…§ä»£ç å®šä¹‰é¡ºåºå»è¯»å–æ–‡ä»¶ï¼Œå¦‚æœä¸­é—´å‡ºé”™ï¼Œå°±ä¼šç›´æ¥æ‰“å°æœ€åç»“æœï¼Œå‡ºé”™æ–‡ä»¶ä¹‹åçš„æ–‡ä»¶ä¸ä¼šå†è¯»å–ã€‚getResultå’ŒgetResult1ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«æ˜¯gentorå‡½æ•°å’Œasyncå‡½æ•°å»æ‰§è¡Œpromiseï¼Œå…¶å®ä¹Ÿå°±æ˜¯è®²è¿°äº†asyncçš„åŸç†</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2020/04/23/ç½‘æ˜“å¾®ä¸“ä¸š-node-1-2-3-ES6-å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ/" data-id="ckbm7472v002eb4xqjlkiv2dg" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-babel/">react babel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å‰ç«¯è·¯ç”±/">å‰ç«¯è·¯ç”±</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ‹‰å‹¾-æ‰‹å†™Promiseæºç /">æ‹‰å‹¾  æ‰‹å†™Promiseæºç </a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ‹‰å‹¾-JavaScriptå¼‚æ­¥ç¼–ç¨‹/">æ‹‰å‹¾ JavaScriptå¼‚æ­¥ç¼–ç¨‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ‹‰å‹¾-å‡½æ•°å¼ç¼–ç¨‹/">æ‹‰å‹¾ å‡½æ•°å¼ç¼–ç¨‹</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ‹‰å‹¾-å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼/">æ‹‰å‹¾ å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ•°æ®ç»“æ„/">æ•°æ®ç»“æ„</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ­£åˆ™/">æ­£åˆ™</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç®—æ³•/">ç®—æ³•</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç½‘æ˜“å¾®ä¸“ä¸š-Flutter/">ç½‘æ˜“å¾®ä¸“ä¸š Flutter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ç½‘æ˜“å¾®ä¸“ä¸š-node/">ç½‘æ˜“å¾®ä¸“ä¸š node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/react-babel/" style="font-size: 10px;">react babel</a> <a href="/tags/å‰ç«¯è·¯ç”±/" style="font-size: 10px;">å‰ç«¯è·¯ç”±</a> <a href="/tags/æ‹‰å‹¾-æ‰‹å†™Promiseæºç /" style="font-size: 10px;">æ‹‰å‹¾  æ‰‹å†™Promiseæºç </a> <a href="/tags/æ‹‰å‹¾-JavaScriptå¼‚æ­¥ç¼–ç¨‹/" style="font-size: 10px;">æ‹‰å‹¾ JavaScriptå¼‚æ­¥ç¼–ç¨‹</a> <a href="/tags/æ‹‰å‹¾-å‡½æ•°å¼ç¼–ç¨‹/" style="font-size: 10px;">æ‹‰å‹¾ å‡½æ•°å¼ç¼–ç¨‹</a> <a href="/tags/æ‹‰å‹¾-å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼/" style="font-size: 10px;">æ‹‰å‹¾ å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼</a> <a href="/tags/æ•°æ®ç»“æ„/" style="font-size: 13.33px;">æ•°æ®ç»“æ„</a> <a href="/tags/æ­£åˆ™/" style="font-size: 10px;">æ­£åˆ™</a> <a href="/tags/ç®—æ³•/" style="font-size: 20px;">ç®—æ³•</a> <a href="/tags/ç½‘æ˜“å¾®ä¸“ä¸š-Flutter/" style="font-size: 10px;">ç½‘æ˜“å¾®ä¸“ä¸š Flutter</a> <a href="/tags/ç½‘æ˜“å¾®ä¸“ä¸š-node/" style="font-size: 10px;">ç½‘æ˜“å¾®ä¸“ä¸š node</a> <a href="/tags/è®¾è®¡æ¨¡å¼/" style="font-size: 16.67px;">è®¾è®¡æ¨¡å¼</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/18/æ‹‰å‹¾-æ‰‹å†™Promiseæºç /">æ‹‰å‹¾-æ‰‹å†™Promiseæºç </a>
          </li>
        
          <li>
            <a href="/2020/06/17/æ‹‰å‹¾-JavaScriptå¼‚æ­¥ç¼–ç¨‹/">æ‹‰å‹¾-JavaScriptå¼‚æ­¥ç¼–ç¨‹</a>
          </li>
        
          <li>
            <a href="/2020/06/15/ç½‘æ˜“å¾®ä¸“ä¸š-ç§»åŠ¨ç«¯APPå¼€å‘å·¥ç¨‹å¸ˆ-ç§»åŠ¨UIæ¡†æ¶Flutter-2-1-1-Flutteræ¦‚è¿°åŠå¼€å‘ç¯å¢ƒ/">ç½‘æ˜“å¾®ä¸“ä¸š-ç§»åŠ¨ç«¯APPå¼€å‘å·¥ç¨‹å¸ˆ-ç§»åŠ¨UIæ¡†æ¶Flutter-2.1.1-Flutteræ¦‚è¿°åŠå¼€å‘ç¯å¢ƒ</a>
          </li>
        
          <li>
            <a href="/2020/06/14/æ‹‰å‹¾-å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼/">æ‹‰å‹¾-å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼</a>
          </li>
        
          <li>
            <a href="/2020/06/14/æ‹‰å‹¾-å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼-5-é«˜é˜¶å‡½æ•°-å‡½æ•°ä½œä¸ºå‚æ•°/">æ‹‰å‹¾-å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼-5-é«˜é˜¶å‡½æ•°-å‡½æ•°ä½œä¸ºå‚æ•°</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 snakeXu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>